(function outer(modules,cache,entries){var global=function(){return this}();function require(name){if(cache[name])return cache[name].exports;if(modules[name])return call(name,require);throw new Error('cannot find module "'+name+'"')}function call(id,require){var m=cache[id]={exports:{}};var mod=modules[id];var name=mod[2];var fn=mod[0];var threw=true;try{fn.call(m.exports,function(req){var dep=modules[id][1][req];return require(dep||req)},m,m.exports,outer,modules,cache,entries);threw=false}finally{if(threw){delete cache[id]}else if(name){cache[name]=cache[id]}}return cache[id].exports}for(var id in entries){if(entries[id]){global[entries[id]]=require(id)}else{require(id)}}require.duo=true;require.cache=cache;require.modules=modules;return require})({1:[function(require,module,exports){(function(){var Plugin,_tk,aPlugin,attrs,buildqs,circPlus,debug,doc,dom,fn,gsnContext,gsnSw2,gsndfpfactory,gsnpods,i,j,k,lastRefreshTime,len,len1,loadiframe,log,myGsn,myPlugin,oldGsnAdvertising,prefix,ref,ref1,script,trakless2,win;debug=require("debug");log=debug("gsndfp");trakless2=require("trakless");loadiframe=require("load-iframe");dom=require("dom");gsndfpfactory=require("./gsndfpfactory.coffee");if(typeof console!=="undefined"&&console!==null){if(console.log.bind!=null){log.log=console.log.bind(console)}}win=window;doc=win.document;gsnContext=win.GSNContext;_tk=win._tk;myGsn=win.Gsn||{};oldGsnAdvertising=myGsn.Advertising;gsnSw2=new gsndfpfactory;gsnpods=new gsndfpfactory;circPlus=new gsndfpfactory;lastRefreshTime=0;if(oldGsnAdvertising!=null){if(oldGsnAdvertising.pluginLoaded){return}}Plugin=function(){function Plugin(){}Plugin.prototype.pluginLoaded=true;Plugin.prototype.defP={page:void 0,evtname:void 0,dept:void 0,deviceid:void 0,storeid:void 0,consumerid:void 0,isanon:true,loyaltyid:void 0,aisle:void 0,category:void 0,shelf:void 0,brand:void 0,pcode:void 0,pdesc:void 0,latlng:void 0,evtcategory:void 0,evtproperty:void 0,evtaction:void 0,evtvalue:void 0};Plugin.prototype.translator={page:"dt",evtname:"en",dept:"dpt",deviceid:"dvceid",storeid:"stid",consumerid:"uid",isanon:"anon",loyaltyid:"loyid",aisle:"aisle",category:"cat",shelf:"shf",brand:"bn",pcode:"ic",pdesc:"in",latlng:"lln",evtcategory:"ec",evtproperty:"ep",evtlabel:"el",evtaction:"ea",evtvalue:"ev"};Plugin.prototype.isDebug=false;Plugin.prototype.hasLoad=false;Plugin.prototype.gsnid=0;Plugin.prototype.selector="body";Plugin.prototype.apiUrl="https://clientapi.gsn2.com/api/v1";Plugin.prototype.gsnNetworkId=void 0;Plugin.prototype.gsnNetworkStore=void 0;Plugin.prototype.onAllEvents=void 0;Plugin.prototype.oldGsnAdvertising=oldGsnAdvertising;Plugin.prototype.minSecondBetweenRefresh=2;Plugin.prototype.enableCircPlus=false;Plugin.prototype.disableSw="";Plugin.prototype.source="";Plugin.prototype.targetting={};Plugin.prototype.depts="";Plugin.prototype.circPlusBody=void 0;Plugin.prototype.refreshExisting={circPlus:false,pods:false};Plugin.prototype.circPlusDept=void 0;Plugin.prototype.timer=void 0;Plugin.prototype.getNetworkId=function(includeStore){var result,self;self=this;result=self.gsnNetworkId+((self.source||"").length>0?"."+self.source:"");if(includeStore&&typeof self.gsnNetworkStore==="string"){self.gsnNetworkStore=_tk.util.trim(self.gsnNetworkStore);if(self.gsnNetworkStore.indexOf("/")!==0){self.gsnNetworkStore="/"+self.gsnNetworkStore}result=result.replace(/\/$/gi,"")+(self.gsnNetworkStore||"")}if(result.indexOf("6394")<=0){result=("/6394/"+result).replace("//","/")}return result};Plugin.prototype.emit=function(en,ed){if(en.indexOf("gsnevent")<0){en="gsnevent:"+en}win.setTimeout(function(){_tk.emitTop(en,{type:en,en:en.replace("gsnevent:",""),detail:ed});if(typeof this.onAllEvents==="function"){this.onAllEvents({type:en,en:en.replace("gsnevent:",""),detail:ed})}},100);return this};Plugin.prototype.on=function(en,cb){if(en.indexOf("gsnevent")<0){en="gsnevent:"+en}trakless.on(en,cb);return this};Plugin.prototype.off=function(en,cb){if(en.indexOf("gsnevent")<0){en="gsnevent:"+en}trakless.off(en,cb);return this};Plugin.prototype.log=function(message){var self;self=myGsn.Advertising;if(self.isDebug||debug.enabled("gsndfp")){self.isDebug=true;if(typeof message==="object"){try{message=JSON.stringify(message)}catch(_error){}}log(message)}return this};Plugin.prototype.trackAction=function(actionParam){var k,k2,self,tsP,v;self=myGsn.Advertising;tsP={};if(typeof actionParam==="object"){for(k in actionParam){v=actionParam[k];if(!(v!=null)){continue}k2=self.translator[k];if(k2){tsP[k2]=v}}}_tk.track("gsn",tsP);self.log(actionParam);return this};Plugin.prototype.cleanKeyword=function(keyword){var result;result=keyword.replace(/[^a-zA-Z0-9]+/gi,"_").replace(/^[_]+/gi,"");if(result.toLowerCase!=null){result=result.toLowerCase()}return result};Plugin.prototype.addDept=function(dept){var goodDept,self;self=myGsn.Advertising;if(dept!=null){goodDept=self.cleanKeyword(dept);goodDept=","+goodDept;if(self.depts.indexOf(goodDept)<0){self.depts=""+goodDept+self.depts}}return this};Plugin.prototype.ajaxFireUrl=function(url){var img;if(typeof url==="string"){if(url.length<10){return}url=url.replace("%%CACHEBUSTER%%",(new Date).getTime());img=new Image(1,1);img.src=url}return this};Plugin.prototype.clickProduct=function(click,categoryId,brandName,productDescription,productCode,quantity,displaySize,regularPrice,currentPrice,savingsAmount,savingsStatement,adCode,creativeId){this.ajaxFireUrl(click);this.emit("clickProduct",{myPlugin:this,CategoryId:categoryId,BrandName:brandName,Description:productDescription,ProductCode:productCode,DisplaySize:displaySize,RegularPrice:regularPrice,CurrentPrice:currentPrice,SavingsAmount:savingsAmount,SavingsStatement:savingsStatement,AdCode:adCode,CreativeId:creativeId,Quantity:quantity||1})};Plugin.prototype.clickBrickOffer=function(click,offerCode,checkCode){this.ajaxFireUrl(click);this.emit("clickBrickOffer",{myPlugin:this,OfferCode:offerCode||0})};Plugin.prototype.clickBrand=function(click,brandName){this.ajaxFireUrl(click);this.setBrand(brandName);this.emit("clickBrand",{myPlugin:this,BrandName:brandName})};Plugin.prototype.clickPromotion=function(click,adCode){this.ajaxFireUrl(click);this.emit("clickPromotion",{myPlugin:this,AdCode:adCode})};Plugin.prototype.clickRecipe=function(click,recipeId){this.ajaxFireUrl(click);this.emit("clickRecipe",{RecipeId:recipeId})};Plugin.prototype.clickLink=function(click,url,target){if(target===void 0||target===""){target="_top"}this.ajaxFireUrl(click);this.emit("clickLink",{myPlugin:this,Url:url,Target:target})};Plugin.prototype.clickCustom=function(click,name,value){this.ajaxFireUrl(click);this.emit("clickCustom",{myPlugin:this,Name:name,Value:value})};Plugin.prototype.setBrand=function(brandName){trakless.util.session("gsndfp:brand",brandName)};Plugin.prototype.getBrand=function(){return trakless.util.session("gsndfp:brand")};Plugin.prototype.actionHandler=function(target,evt){var allData,elem,i,k,len,payLoad,realk,self,v;self=myGsn.Advertising;elem=target;payLoad={};if(elem!=null){allData=trakless.util.allData(elem);for(v=i=0,len=allData.length;i<len;v=++i){k=allData[v];if(!/^gsn/gi.test(k)){continue}realk=/^gsn/i.replace(k,"").toLowerCase();payLoad[realk]=v}}self.refresh(payLoad);return self};Plugin.prototype.refreshAdPodsInternal=function(actionParam,forceRefresh){var canRefresh,k,payLoad,ref,self,targetting,v;self=myGsn.Advertising;payLoad=actionParam||{};ref=self.defP;for(k in ref){v=ref[k];if(v!=null){if(!payLoad[k]){payLoad[k]=v}}}if(gsnSw2.isVisible){return self}payLoad.siteid=self.gsnid;self.trackAction(payLoad);canRefresh=(new Date).getTime()/1e3-lastRefreshTime>=self.minSecondBetweenRefresh;if(forceRefresh||canRefresh){lastRefreshTime=(new Date).getTime()/1e3;if(payLoad.dept!=null){self.addDept(payLoad.dept)}if(forceRefresh){self.refreshExisting.pods=false;self.refreshExisting.circPlus=false}targetting={dept:self.depts.split(",").slice(1,5),brand:self.getBrand()};if(payLoad.page){targetting.kw=payLoad.page.replace(/[^a-z]/gi,"")}if(targetting.dept.length>0){self.depts=","+targetting.dept.join(",")}else{targetting.dept=["produce"]}gsnpods.refresh({setTargeting:targetting,sel:".gsnunit",forceRefresh:forceRefresh,refreshExisting:self.refreshExisting.pods});self.refreshExisting.pods=true;if(self.enableCircPlus){targetting.dept=[targetting.dept[0]];circPlus.refresh({setTargeting:targetting,bodyTemplate:self.bodyTemplate,sel:".circplus",forceRefresh:forceRefresh,refreshExisting:self.refreshExisting.circPlus});self.refreshExisting.circPlus=true}}return this};Plugin.prototype.refresh=function(actionParam,forceRefresh){var self;self=myGsn.Advertising;if(!self.hasGsnUnit()){return self}if(self.gsnid){if(gsnSw2.isVisible){return self}gsnSw2.refresh({displayWhenExists:".gsnadunit,.gsnunit,.gsn-noads",sel:".gsnsw",onData:function(evt){if((self.source||"").length>0){return evt.cancel=self.disableSw.indexOf(self.source)>0}},onClose:function(){if(self.selector!=null){dom(self.selector)[0].onclick=function(evt){var tg;evt=evt||win.event;tg=evt.target||evt.srcElement;if(tg.nodeType===3){tg=tg.parentNode}if(win.gmodal.hasCls(tg,"gsnaction")){return self.actionHandler(tg,evt)}else if(win.gmodal.hasCls(tg.parentNode,"gsnaction")){return self.actionHandler(tg.parentNode,evt)}};self.selector=null}return self.refreshAdPodsInternal(actionParam,forceRefresh)}})}return this};Plugin.prototype.hasGsnUnit=function(){return dom(".gsnadunit,.gsnunit,.circplus,.gsn-noads").length>0};Plugin.prototype.setDefault=function(defParam){var k,self,v;self=myGsn.Advertising;if(typeof defParam==="object"){for(k in defParam){v=defParam[k];if(v!=null){self.defP[k]=v}}}return this};Plugin.prototype.refreshWithTimer=function(actionParam){var self,timer;self=myGsn.Advertising;if(actionParam==null){actionParam={evtname:"refresh-timer"}}self.refresh(actionParam,true);timer=(self.timer||0)*1e3;if(timer>0){setTimeout(self.refreshWithTimer,timer)}return this};Plugin.prototype.load=function(gsnid,isDebug){var self;self=myGsn.Advertising;if(gsnid){self.gsnid=gsnid}if(isDebug){self.isDebug=true;debug.enable("gsndfp")}if(self.hasLoad){return self}self.hasLoad=true;return self.refreshWithTimer({evtname:"loading"})};return Plugin}();myPlugin=new Plugin;myGsn.Advertising=myPlugin;myGsn.Advertising.brickRedirect=myPlugin.clickBrickOffer;myGsn.Advertising.clickBrand=myPlugin.clickBrand;myGsn.Advertising.clickThru=myPlugin.clickProduct;myGsn.Advertising.refreshAdPods=myPlugin.refresh;myGsn.Advertising.logAdImpression=function(){};myGsn.Advertising.logAdRequest=function(){};myGsn.Advertising.promotionRedirect=myPlugin.clickPromotion;myGsn.Advertising.verifyClickThru=myPlugin.clickLink;myGsn.Advertising.recipeRedirect=myPlugin.clickRecipe;win.Gsn=myGsn;win.gsndfp=myGsn.Advertising;if(gsnContext!=null){buildqs=function(k,v){if(v!=null){v=new String(v);if(k==="ProductDescription"){v=v.replace(/&/,"`")}return k+"="+v}else{}};myGsn.Advertising.on("clickRecipe",function(data){if(data.type!=="gsnevent:clickRecipe"){return}win.location.replace("/Recipes/RecipeFull.aspx?RecipeID="+data.detail.RecipeId)});myGsn.Advertising.on("clickProduct",function(data){var product,qs;if(data.type!=="gsnevent:clickProduct"){return}product=data.detail;if(product){qs=new String("");qs+=buildqs("DepartmentID",product.CategoryId);qs+="~"+buildqs("BrandName",product.BrandName);qs+="~"+buildqs("ProductDescription",product.Description);qs+="~"+buildqs("ProductCode",product.ProductCode);qs+="~"+buildqs("DisplaySize",product.DisplaySize);qs+="~"+buildqs("RegularPrice",product.RegularPrice);qs+="~"+buildqs("CurrentPrice",product.CurrentPrice);qs+="~"+buildqs("SavingsAmount",product.SavingsAmount);qs+="~"+buildqs("SavingsStatement",product.SavingsStatement);qs+="~"+buildqs("Quantity",product.Quantity);qs+="~"+buildqs("AdCode",product.AdCode);qs+="~"+buildqs("CreativeID",product.CreativeId);if(typeof AddAdToShoppingList==="function"){AddAdToShoppingList(qs)}}});myGsn.Advertising.on("clickLink",function(data){var linkData,url;if(data.type!=="gsnevent:clickLink"){return}linkData=data.detail;if(linkData){if(!(typeof linkData.Target==="string")){linkData.Target="_top"}if(linkData.Target==="_blank"){}else{url=_tk.util.trim(linkData.Url);if(url==="circular"){url="/Shop/WeeklyAd.aspx"}else if(url==="coupons"){url="/Shop/Coupons.aspx"}else if(url==="recipecenter"){url="/Recipes/RecipeCenter.aspx"}else if(url==="registration"){url="/Profile/SignUp.aspx"}win.location.replace(url)}}});myGsn.Advertising.on("clickPromotion",function(data){var linkData;if(data.type!=="gsnevent:clickPromotion"){return}linkData=data.detail;if(linkData){win.location.replace("/Ads/Promotion.aspx?adcode="+linkData.AdCode)}});myGsn.Advertising.on("clickBrickOffer",function(data){var linkData,url;if(data.type!=="gsnevent:clickBrickOffer"){return}linkData=data.detail;if(linkData){url=myGsn.Advertising.apiUrl+"/profile/BrickOffer/"+gsnContext.ConsumerID+"/"+linkData.OfferCode;win.open(url,"")}})}aPlugin=myGsn.Advertising;if(!aPlugin){return}attrs={debug:function(value){if(typeof value!=="string"){return}aPlugin.isDebug=value!=="false";if(value){return debug.enable("gsndfp")}},api:function(value){if(typeof value!=="string"){return}return aPlugin.apiUrl=value},source:function(value){if(typeof value!=="string"){return}return aPlugin.source=value},gsnid:function(value){if(!value){return}aPlugin.gsnid=value;return trakless.setSiteId(value)},timer:function(value){if(!value){return}return aPlugin.timer=value},hideon:function(value){if(!value){return}return aPlugin.hideOn=value},cleanrefresh:function(value){if(!value){return}return aPlugin.cleanRefresh=value},selector:function(value){if(typeof value!=="string"){return}return aPlugin.selector=value}};ref=doc.getElementsByTagName("script");for(i=0,len=ref.length;i<len;i++){script=ref[i];if(/gsndfp/i.test(script.src)){ref1=["","data-"];for(j=0,len1=ref1.length;j<len1;j++){prefix=ref1[j];for(k in attrs){fn=attrs[k];fn(script.getAttribute(prefix+k))}}}}trakless.setPixel("//pi.gsngrocers.com/pi.gif");trakless.store.init({url:"//cdn.gsngrocers.com/script/xstore.html",dntIgnore:true});if(aPlugin.hasGsnUnit()){aPlugin.load()}else{trakless.util.ready(function(){return aPlugin.load()})}module.exports=myGsn}).call(this)},{debug:2,trakless:3,"load-iframe":4,dom:5,"./gsndfpfactory.coffee":6}],2:[function(require,module,exports){exports=module.exports=require("./debug");exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:localstorage();exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function useColors(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}exports.formatters.j=function(v){return JSON.stringify(v)};function formatArgs(){var args=arguments;var useColors=this.useColors;args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff);if(!useColors)return args;var c="color: "+this.color;args=[args[0],c,"color: inherit"].concat(Array.prototype.slice.call(args,1));var index=0;var lastC=0;args[0].replace(/%[a-z%]/g,function(match){if("%%"===match)return;index++;if("%c"===match){lastC=index}});args.splice(lastC,0,c);return args}function log(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(namespaces){try{if(null==namespaces){exports.storage.removeItem("debug")}else{exports.storage.debug=namespaces}}catch(e){}}function load(){var r;try{r=exports.storage.debug}catch(e){}return r}exports.enable(load());function localstorage(){try{return window.localStorage}catch(e){}}},{"./debug":7}],7:[function(require,module,exports){exports=module.exports=debug;exports.coerce=coerce;exports.disable=disable;exports.enable=enable;exports.enabled=enabled;exports.humanize=require("ms");exports.names=[];exports.skips=[];exports.formatters={};var prevColor=0;var prevTime;function selectColor(){return exports.colors[prevColor++%exports.colors.length]}function debug(namespace){function disabled(){}disabled.enabled=false;function enabled(){var self=enabled;var curr=+new Date;var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;if(null==self.useColors)self.useColors=exports.useColors();if(null==self.color&&self.useColors)self.color=selectColor();var args=Array.prototype.slice.call(arguments);args[0]=exports.coerce(args[0]);if("string"!==typeof args[0]){args=["%o"].concat(args)}var index=0;args[0]=args[0].replace(/%([a-z%])/g,function(match,format){if(match==="%%")return match;index++;var formatter=exports.formatters[format];if("function"===typeof formatter){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--}return match});if("function"===typeof exports.formatArgs){args=exports.formatArgs.apply(self,args)}var logFn=enabled.log||exports.log||console.log.bind(console);logFn.apply(self,args)}enabled.enabled=true;var fn=exports.enabled(namespace)?enabled:disabled;fn.namespace=namespace;return fn}function enable(namespaces){exports.save(namespaces);var split=(namespaces||"").split(/[\s,]+/);var len=split.length;for(var i=0;i<len;i++){if(!split[i])continue;namespaces=split[i].replace(/\*/g,".*?");if(namespaces[0]==="-"){exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$"))}else{exports.names.push(new RegExp("^"+namespaces+"$"))}}}function disable(){exports.enable("")}function enabled(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++){if(exports.skips[i].test(name)){return false}}for(i=0,len=exports.names.length;i<len;i++){if(exports.names[i].test(name)){return true}}return false}function coerce(val){if(val instanceof Error)return val.stack||val.message;return val}},{ms:8}],8:[function(require,module,exports){var s=1e3;var m=s*60;var h=m*60;var d=h*24;var y=d*365.25;module.exports=function(val,options){options=options||{};if("string"==typeof val)return parse(val);return options.long?long(val):short(val)};function parse(str){str=""+str;if(str.length>1e4)return;var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(!match)return;var n=parseFloat(match[1]);var type=(match[2]||"ms").toLowerCase();switch(type){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}function short(ms){if(ms>=d)return Math.round(ms/d)+"d";if(ms>=h)return Math.round(ms/h)+"h";if(ms>=m)return Math.round(ms/m)+"m";if(ms>=s)return Math.round(ms/s)+"s";return ms+"ms"}function long(ms){return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"}function plural(ms,n,name){if(ms<n)return;if(ms<n*1.5)return Math.floor(ms/n)+" "+name;return Math.ceil(ms/n)+" "+name+"s"}},{}],3:[function(require,module,exports){var $defaults,$pixel,$sessionid,$siteid,$st,$trakless2,$userid,$uuid,Emitter,attrs,cookie,debounce,defaults,doc,docReady,fn,getImage,hasNOL,i,isDom,j,k,len,len1,lsqueue,mystore,mytrakless,myutil,prefix,query,queue,ref,ref1,script,session,tracker,trakless,traklessParent,util,uuid,webanalyser,win,xstore;mystore=require("xstore");xstore=new mystore;Emitter=require("emitter");cookie=require("cookie");defaults=require("defaults");query=require("querystring");uuid=require("uuid");webanalyser=require("webanalyser");docReady=require("doc-ready");debounce=require("debounce");lsqueue=require("lsqueue");queue=new lsqueue("tksq");win=window;doc=win.document;hasNOL=win.navigator.onLine;session=win.sessionStorage;$siteid=0;$pixel="//niiknow.github.io/pixel.gif";$uuid=null;$userid=null;$st=new Date((new Date).getFullYear(),0,1).getTime();$sessionid=(new Date).getTime()-$st;$defaults=null;if(typeof session==="undefined"){session={getItem:function(k){return cookie(k)},setItem:function(k,v){return cookie(k,v,{path:"/"})}}}try{$sessionid=session.getItem("tklsid");if($sessionid==null){$sessionid=(new Date).getTime()-$st;session.setItem("tklsid",$sessionid)}}catch(_error){}getImage=function(cfgUrl,tks,qs,callback){var image,url;image=new Image(1,1);if(cfgUrl.indexOf("//")===0){cfgUrl=win.location.protocol==="https"?"https:"+cfgUrl:"http:"+cfgUrl}image.onload=function(){var iterator;iterator=0;if(typeof callback==="function"){callback()}};url=cfgUrl+(cfgUrl.indexOf("?")<0?"?":"&")+(tks+"&"+qs);image.src=url;return image};isDom=function(obj){if(obj!=null){if(obj.nodeName){switch(obj.nodeType){case 1:return true;case 3:return object.nodeValue!=null}}}return false};util=function(){function util(){}util.prototype.allData=function(el){var attr,camelCaseName,data,i,k,len,name,ref;data={};if(el!=null){ref=el.attributes;for(k=i=0,len=ref.length;i<len;k=++i){attr=ref[k];name=attr.name.replace(/^data-/g,"");camelCaseName=name.replace(/-(.)/g,function($0,$1){return $1.toUpperCase()});data[camelCaseName]=attr.value}}return data};util.prototype.parseJSON=function(v){var v2;if(typeof v==="string"){if(v.indexOf("{")>=0||v.indexOf("[")>=0){v2=JSON.parse(v);if(!(v2==null)){return v2}}}return v};util.prototype.stringify=function(v){if(typeof v==="string"){return v}return JSON.stringify(v)};util.prototype.session=function(k,v){if(v!=null){if(!(typeof v==="string")){v=this.stringify(v)}cookie("tls:"+k,v,{path:"/"});return v}v=cookie("tls:"+k);if(typeof v==="undefined"){return v}return this.parseJSON(v)};util.prototype.cookie=cookie;util.prototype.ready=docReady;util.prototype.Emitter=Emitter;util.prototype.trim=function(v){return v.replace(/^\s+|\s+$/gm,"")};return util}();myutil=new util;tracker=function(){function tracker(){}tracker.prototype.pixel="//niiknow.github.io/pixel.gif";tracker.prototype.siteid=0;tracker.prototype.store=null;tracker.prototype.uuid=null;tracker.prototype.getId=function(){var self;self=this;return(self.siteid+"-"+self.pixel).replace(/[^a-zA-z]/gi,"$")};tracker.prototype._tk=function(data,ht,pixel){var k,myData,self,tkd,v;self=this;tkd={uuid:self.uuid,siteid:self.siteid,usid:$sessionid,ht:ht,z:data.z};if($userid){tkd.uid=$userid}myData={};for(k in data){v=data[k];if(v!=null){if(!(typeof v==="string")||myutil.trim(v).length>0){if(k+""!=="undefined"&&k!=="uuid"&&k!=="z"&&!isDom(v)){if(typeof v==="boollean"){v=v?1:0}myData[k]=v}}}}self.emit("track",{ht:ht,pixel:pixel,qs:[tkd,myData]});getImage(pixel,query.stringify(tkd),query.stringify(myData));self.emit("tracked",{ht:ht,pixel:pixel,qs:[tkd,myData]});return self};tracker.prototype._track=function(ht,ctx){var pixel,self;self=this;if(ctx==null){ctx={}}if(self.siteid>0){pixel=myutil.trim(this.pixel);if(!self.uuid){self.uuid=uuid();$uuid=self.uuid;if(self.store!=null){self.store.get("tklsuid").then(function(id){if(!id){self.store.set("tklsuid",self.uuid)}self.uuid=id||self.uuid;$uuid=self.uuid;return self._tk(ctx,ht,pixel)})}}else{self._tk(ctx,ht,pixel)}}return this};tracker.prototype.track=function(ht,ctx){var self;self=this;myutil.ready(function(){ctx=ctx||{};if(!ctx.z){ctx.z=(new Date).getTime()-$st}return self._track(ht||"custom",ctx)});return this};return tracker}();Emitter(tracker.prototype);mytrakless=function(){function mytrakless(){var self;self=this;self._track=debounce(function(){var item,k,ref,v;self=this;if(!hasNOL||win.navigator.onLine){item=queue.pop();if(item!=null){self.emit("track",item);ref=self.trackers;for(k in ref){v=ref[k];v.track(item.ht,item.ctx)}return self.emit("tracked",item)}}},222);return self}mytrakless.prototype.trackers={};mytrakless.prototype.setSiteId=function(siteid){var mysid;mysid=parseInt(siteid);$siteid=mysid>0?mysid:$siteid};mytrakless.prototype.setPixel=function(pixelUrl){if(pixelUrl){$pixel=pixelUrl||$pixel}};mytrakless.prototype.setUserId=function(id){if(id){$userid=id||$userid}};mytrakless.prototype.store=xstore;mytrakless.prototype.getTracker=function(siteid,pixelUrl){var id,rst,self;self=this;rst=new tracker;rst.siteid=siteid!=null?siteid:$siteid;rst.pixel=pixelUrl!=null?pixelUrl:$pixel;if(rst.siteid!=null&&rst.pixel!=null){rst.store=xstore;id=rst.getId();if(!self.trackers[id]){self.trackers[id]=rst;rst.on("tracked",self._track)}return self.trackers[id]}throw"siteid or pixelUrl is required"};mytrakless.prototype.getDefaultTracker=function(){var id,self;self=this;id=($siteid+"-"+$pixel).replace(/[^a-zA-z]/gi,"$");if(self.trackers[id]==null){self.getTracker()}return self.trackers[id]};mytrakless.prototype.util=myutil;mytrakless.prototype.event=function(category,action,label,property,value,extra){extra=extra||{};if(!isNaN(parseInt(value))){extra.ev=value}extra.ec=category||"event";if(action){extra.ea=action}if(label){extra.el=label}if(property){extra.ep=property}return this.track("event",extra)};mytrakless.prototype.pageview=function(ctx){return this.track("pageview",ctx)};mytrakless.prototype.track=function(ht,ctx){var self;self=this;self.getDefaultTracker();ctx=ctx||{};ctx.z=(new Date).getTime()-$st;queue.push({ht:ht,ctx:ctx,uuid:$uuid,usid:$sessionid,uid:$userid});self._track();return self};mytrakless.prototype.emitTop=function(en,ed){if(typeof $trakless2!=="undefined"&&$trakless2!==null){$trakless2.emit(en,ed)}return this};return mytrakless}();trakless=new mytrakless;Emitter(trakless);$trakless2=trakless;if(win.top!==win){try{traklessParent=win.top.trakless;$trakless2=traklessParent}catch(_error){$trakless2=win.parent.trakless}}trakless.on("track",function(item){var myDef;if(item.ht==="pageview"){myDef=webanalyser.get();return item.ctx=defaults(item.ctx,myDef)}});attrs={site:function(value){return trakless.setSiteId(value)},pixel:function(value){if(typeof value!=="string"){return}return trakless.setPixel(value)}};ref=win.document.getElementsByTagName("script");for(i=0,len=ref.length;i<len;i++){script=ref[i];if(/trakless/i.test(script.src)){ref1=["","data-"];for(j=0,len1=ref1.length;j<len1;j++){prefix=ref1[j];for(k in attrs){fn=attrs[k];fn(script.getAttribute(prefix+k))}}}}win.trakless=trakless;win._tk=trakless;module.exports=trakless},{xstore:9,emitter:10,cookie:11,defaults:12,querystring:13,uuid:14,webanalyser:15,"doc-ready":16,debounce:17,lsqueue:18}],9:[function(require,module,exports){(function(win){var cacheBust,cookie,debug,delay,dnt,doc,load,log,maxStore,mydeferred,myproxy,myq,onMessage,q,randomHash,store,usePostMessage,xstore;doc=win.document;debug=require("debug");log=debug("xstore");load=require("load-iframe");store=require("store.js");cookie=require("cookie");usePostMessage=win.postMessage!=null;cacheBust=0;delay=333;maxStore=6e3*60*24*777;myq=[];q=setInterval(function(){if(myq.length>0){return myq.shift()()}},delay+5);dnt=win.navigator.doNotTrack||win.navigator.msDoNotTrack||win.doNotTrack;onMessage=function(fn){if(win.addEventListener){return win.addEventListener("message",fn,false)}else{return win.attachEvent("onmessage",fn)}};mydeferred=function(){var i,k,len,ref,v;function mydeferred(){}mydeferred.prototype.q=function(xs,event,item){var d,dh,self;self=this;self.mycallbacks=[];self.myerrorbacks=[];dh=randomHash();d=[0,dh,event,item.k,item.v];xs.dob[dh]=self;if(usePostMessage){xs.doPostMessage(xs,JSON.stringify(d))}else{if(xs.iframe!==null){cacheBust+=1;d[0]=+new Date+cacheBust;xs.hash="#"+JSON.stringify(d);if(xs.iframe.src){xs.iframe.src=""+proxyPage+xs.hash}else if(xs.iframe.contentWindow!=null&&xs.iframe.contentWindow.location!=null){xs.iframe.contentWindow.location=""+proxyPage+xs.hash}else{xs.iframe.setAttribute("src",""+proxyPage+xs.hash)}}}self.then=function(fn,fnErr){if(fnErr){self.myerrorbacks.push(fnErr)}self.mycallbacks.push(fn);return self};return self};mydeferred.prototype.myresolve=function(data){var i,k,len,ref,self,v;self=this;ref=self.mycallbacks||[];for(k=i=0,len=ref.length;i<len;k=++i){v=ref[k];v(data)}return self};mydeferred.prototype.myreject=function(e){var self;return self=this};ref=self.myerrorbacks||[];for(k=i=0,len=ref.length;i<len;k=++i){v=ref[k];v(data)}self;return mydeferred}();myproxy=function(){function myproxy(){}myproxy.prototype.delay=333;myproxy.prototype.hash=win.location.hash;myproxy.prototype.init=function(){var self;self=this;if(usePostMessage){return onMessage(self.handleProxyMessage)}else{return setInterval(function(){var newhash;newhash=win.location.hash;if(newhash!==xs.hash){xs.hash=newhash;self.handleProxyMessage({data:JSON.parse(newhash.substr(1))})}},self.delay)}};myproxy.prototype.handleProxyMessage=function(e){var d,hash,id,key,method,myCacheBust,mystore,self;d=e.data;if(typeof d==="string"){if(/^xstore-/.test(d)){d=d.split(",")}else{try{d=JSON.parse(d)}catch(_error){return}}}if(!(d instanceof Array)){return}id=d[1];if(!/^xstore-/.test(id)){return}self=this;key=d[3]||"xstore";method=d[2];cacheBust=0;mystore=store;if(!store.enabled){mystore={get:function(k){return cookie(key)},set:function(k,v){return cookie(k,v,{maxage:maxStore})},remove:function(k){return cookie(k,null)},clear:function(){var cookies,i,idx,k,len,name,results,v;cookies=doc.cookie.split(";");results=[];for(k=i=0,len=cookies.length;i<len;k=++i){v=cookies[k];idx=v.indexOf("=");name=idx>-1?v.substr(0,idx):v;results.push(doc.cookie=name+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT")}return results}}}if(method==="get"){d[4]=mystore.get(key)}else if(method==="set"){mystore.set(key,d[4])}else if(method==="remove"){mystore.remove(key)}else if(method==="clear"){mystore.clear()}else{d[2]="error-"+method}d[1]=id.replace("xstore-","xstoreproxy-");if(usePostMessage){e.source.postMessage(JSON.stringify(d),"*")}else{cacheBust+=1;myCacheBust=+new Date+cacheBust;d[0]=myCacheBust;hash="#"+JSON.stringify(d);win.location=win.location.href.replace(win.location.hash,"")+hash}};return myproxy}();randomHash=function(){var rh;rh=Math.random().toString(36).substr(2);return"xstore-"+rh};xstore=function(){function xstore(){}xstore.prototype.hasInit=false;xstore.prototype.debug=debug;xstore.prototype.proxyPage="//niiknow.github.io/xstore/xstore.html";xstore.prototype.iframe=null;xstore.prototype.proxyWin=null;xstore.prototype.hash=null;xstore.prototype.tempStore={};xstore.prototype.dob={};xstore.prototype.get=function(k){this.init();if(dnt){return{then:function(fn){return fn(self.tempStore[k])}}}return(new mydeferred).q(this,"get",{k:k})};xstore.prototype.set=function(k,v){this.init();if(dnt){return{then:function(fn){self.tempStore[k]=v;return fn(self.tempStore[k])}}}return(new mydeferred).q(this,"set",{k:k,v:v})};xstore.prototype.remove=function(k){this.init();if(dnt){return{then:function(fn){delete self.tempStore[k];return fn}}}return(new mydeferred).q(this,"remove",{k:k})};xstore.prototype.clear=function(){this.init();if(dnt){return{then:function(fn){self.tempStore={};return fn}}}return(new mydeferred).q(this,"clear")};xstore.prototype.doPostMessage=function(xs,msg){if(xs.proxyWin!=null){clearInterval(q);xs.proxyWin.postMessage(msg,"*")}return myq.push(function(){return xs.doPostMessage(xs,msg)})};xstore.prototype.handleMessageEvent=function(e){var d,di,id,self;self=this;d=e.data;if(typeof d==="string"){if(/^xstoreproxy-/.test(d)){d=d.split(",")}else{try{d=JSON.parse(d)}catch(_error){return}}}if(!(d instanceof Array)){return}id=d[1];if(!/^xstoreproxy-/.test(id)){return}id=id.replace("xstoreproxy-","xstore-");di=self.dob[id];if(di){if(/^error-/.test(d[2])){di.myreject(d[2])}else{di.myresolve(d[4])}return self.dob[id]=null}};xstore.prototype.init=function(options){var iframe,self;self=this;if(self.hasInit){return self}self.hasInit=true;options=options||{};if(options.isProxy){log("init proxy");(new myproxy).init();return self}self.proxyPage=options.url||self.proxyPage;if(options.dntIgnore||typeof dnt==="undefined"||dnt==="unspecified"||dnt==="no"||dnt==="0"){
log("disable dnt");dnt=false}log("init storeage dnt = "+dnt);return iframe=load(self.proxyPage,function(){log("iframe loaded");self.proxyWin=iframe.contentWindow;if(!usePostMessage){self.hash=proxyWin.location.hash;return setInterval(function(){if(proxyWin.location.hash!==hash){self.hash=proxyWin.location.hash;self.handleMessageEvent({origin:proxyDomain,data:self.hash.substr(1)})}},delay)}else{return onMessage(function(){return self.handleMessageEvent(arguments[0])})}})};return xstore}();return module.exports=xstore})(window)},{debug:2,"load-iframe":4,"store.js":19,cookie:20}],4:[function(require,module,exports){var is=require("is");var onload=require("script-onload");var tick=require("next-tick");module.exports=function loadIframe(options,fn){if(!options)throw new Error("Cant load nothing...");if(is.string(options))options={src:options};var https=document.location.protocol==="https:"||document.location.protocol==="chrome-extension:";if(options.src&&options.src.indexOf("//")===0){options.src=https?"https:"+options.src:"http:"+options.src}if(https&&options.https)options.src=options.https;else if(!https&&options.http)options.src=options.http;var iframe=document.createElement("iframe");iframe.src=options.src;iframe.width=options.width||1;iframe.height=options.height||1;iframe.style.display="none";if(is.fn(fn)){onload(iframe,fn)}tick(function(){var firstScript=document.getElementsByTagName("script")[0];firstScript.parentNode.insertBefore(iframe,firstScript)});return iframe}},{is:21,"script-onload":22,"next-tick":23}],21:[function(require,module,exports){var objProto=Object.prototype;var owns=objProto.hasOwnProperty;var toStr=objProto.toString;var symbolValueOf;if(typeof Symbol==="function"){symbolValueOf=Symbol.prototype.valueOf}var isActualNaN=function(value){return value!==value};var NON_HOST_TYPES={"boolean":1,number:1,string:1,undefined:1};var base64Regex=/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{4}|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)$/;var hexRegex=/^[A-Fa-f0-9]+$/;var is=module.exports={};is.a=is.type=function(value,type){return typeof value===type};is.defined=function(value){return typeof value!=="undefined"};is.empty=function(value){var type=toStr.call(value);var key;if("[object Array]"===type||"[object Arguments]"===type||"[object String]"===type){return value.length===0}if("[object Object]"===type){for(key in value){if(owns.call(value,key)){return false}}return true}return!value};is.equal=function(value,other){var strictlyEqual=value===other;if(strictlyEqual){return true}var type=toStr.call(value);var key;if(type!==toStr.call(other)){return false}if("[object Object]"===type){for(key in value){if(!is.equal(value[key],other[key])||!(key in other)){return false}}for(key in other){if(!is.equal(value[key],other[key])||!(key in value)){return false}}return true}if("[object Array]"===type){key=value.length;if(key!==other.length){return false}while(--key){if(!is.equal(value[key],other[key])){return false}}return true}if("[object Function]"===type){return value.prototype===other.prototype}if("[object Date]"===type){return value.getTime()===other.getTime()}return strictlyEqual};is.hosted=function(value,host){var type=typeof host[value];return type==="object"?!!host[value]:!NON_HOST_TYPES[type]};is.instance=is["instanceof"]=function(value,constructor){return value instanceof constructor};is.nil=is["null"]=function(value){return value===null};is.undef=is.undefined=function(value){return typeof value==="undefined"};is.args=is.arguments=function(value){var isStandardArguments="[object Arguments]"===toStr.call(value);var isOldArguments=!is.array(value)&&is.arraylike(value)&&is.object(value)&&is.fn(value.callee);return isStandardArguments||isOldArguments};is.array=function(value){return"[object Array]"===toStr.call(value)};is.args.empty=function(value){return is.args(value)&&value.length===0};is.array.empty=function(value){return is.array(value)&&value.length===0};is.arraylike=function(value){return!!value&&!is.boolean(value)&&owns.call(value,"length")&&isFinite(value.length)&&is.number(value.length)&&value.length>=0};is.boolean=function(value){return"[object Boolean]"===toStr.call(value)};is["false"]=function(value){return is.boolean(value)&&Boolean(Number(value))===false};is["true"]=function(value){return is.boolean(value)&&Boolean(Number(value))===true};is.date=function(value){return"[object Date]"===toStr.call(value)};is.element=function(value){return value!==undefined&&typeof HTMLElement!=="undefined"&&value instanceof HTMLElement&&value.nodeType===1};is.error=function(value){return"[object Error]"===toStr.call(value)};is.fn=is["function"]=function(value){var isAlert=typeof window!=="undefined"&&value===window.alert;return isAlert||"[object Function]"===toStr.call(value)};is.number=function(value){return"[object Number]"===toStr.call(value)};is.infinite=function(value){return value===Infinity||value===-Infinity};is.decimal=function(value){return is.number(value)&&!isActualNaN(value)&&!is.infinite(value)&&value%1!==0};is.divisibleBy=function(value,n){var isDividendInfinite=is.infinite(value);var isDivisorInfinite=is.infinite(n);var isNonZeroNumber=is.number(value)&&!isActualNaN(value)&&is.number(n)&&!isActualNaN(n)&&n!==0;return isDividendInfinite||isDivisorInfinite||isNonZeroNumber&&value%n===0};is.int=function(value){return is.number(value)&&!isActualNaN(value)&&value%1===0};is.maximum=function(value,others){if(isActualNaN(value)){throw new TypeError("NaN is not a valid value")}else if(!is.arraylike(others)){throw new TypeError("second argument must be array-like")}var len=others.length;while(--len>=0){if(value<others[len]){return false}}return true};is.minimum=function(value,others){if(isActualNaN(value)){throw new TypeError("NaN is not a valid value")}else if(!is.arraylike(others)){throw new TypeError("second argument must be array-like")}var len=others.length;while(--len>=0){if(value>others[len]){return false}}return true};is.nan=function(value){return!is.number(value)||value!==value};is.even=function(value){return is.infinite(value)||is.number(value)&&value===value&&value%2===0};is.odd=function(value){return is.infinite(value)||is.number(value)&&value===value&&value%2!==0};is.ge=function(value,other){if(isActualNaN(value)||isActualNaN(other)){throw new TypeError("NaN is not a valid value")}return!is.infinite(value)&&!is.infinite(other)&&value>=other};is.gt=function(value,other){if(isActualNaN(value)||isActualNaN(other)){throw new TypeError("NaN is not a valid value")}return!is.infinite(value)&&!is.infinite(other)&&value>other};is.le=function(value,other){if(isActualNaN(value)||isActualNaN(other)){throw new TypeError("NaN is not a valid value")}return!is.infinite(value)&&!is.infinite(other)&&value<=other};is.lt=function(value,other){if(isActualNaN(value)||isActualNaN(other)){throw new TypeError("NaN is not a valid value")}return!is.infinite(value)&&!is.infinite(other)&&value<other};is.within=function(value,start,finish){if(isActualNaN(value)||isActualNaN(start)||isActualNaN(finish)){throw new TypeError("NaN is not a valid value")}else if(!is.number(value)||!is.number(start)||!is.number(finish)){throw new TypeError("all arguments must be numbers")}var isAnyInfinite=is.infinite(value)||is.infinite(start)||is.infinite(finish);return isAnyInfinite||value>=start&&value<=finish};is.object=function(value){return"[object Object]"===toStr.call(value)};is.hash=function(value){return is.object(value)&&value.constructor===Object&&!value.nodeType&&!value.setInterval};is.regexp=function(value){return"[object RegExp]"===toStr.call(value)};is.string=function(value){return"[object String]"===toStr.call(value)};is.base64=function(value){return is.string(value)&&(!value.length||base64Regex.test(value))};is.hex=function(value){return is.string(value)&&(!value.length||hexRegex.test(value))};is.symbol=function(value){return typeof Symbol==="function"&&toStr.call(value)==="[object Symbol]"&&typeof symbolValueOf.call(value)==="symbol"}},{}],22:[function(require,module,exports){module.exports=function(el,fn){return el.addEventListener?add(el,fn):attach(el,fn)};function add(el,fn){el.addEventListener("load",function(_,e){fn(null,e)},false);el.addEventListener("error",function(e){var err=new Error('script error "'+el.src+'"');err.event=e;fn(err)},false)}function attach(el,fn){el.attachEvent("onreadystatechange",function(e){if(!/complete|loaded/.test(el.readyState))return;fn(null,e)});el.attachEvent("onerror",function(e){var err=new Error('failed to load the script "'+el.src+'"');err.event=e||window.event;fn(err)})}},{}],23:[function(require,module,exports){"use strict";var callable,byObserver;callable=function(fn){if(typeof fn!=="function")throw new TypeError(fn+" is not a function");return fn};byObserver=function(Observer){var node=document.createTextNode(""),queue,i=0;new Observer(function(){var data;if(!queue)return;data=queue;queue=null;if(typeof data==="function"){data();return}data.forEach(function(fn){fn()})}).observe(node,{characterData:true});return function(fn){callable(fn);if(queue){if(typeof queue==="function")queue=[queue,fn];else queue.push(fn);return}queue=fn;node.data=i=++i%2}};module.exports=function(){if(typeof process!=="undefined"&&process&&typeof process.nextTick==="function"){return process.nextTick}if(typeof document==="object"&&document){if(typeof MutationObserver==="function"){return byObserver(MutationObserver)}if(typeof WebKitMutationObserver==="function"){return byObserver(WebKitMutationObserver)}}if(typeof setImmediate==="function"){return function(cb){setImmediate(callable(cb))}}if(typeof setTimeout==="function"){return function(cb){setTimeout(callable(cb),0)}}return null}()},{}],19:[function(require,module,exports){(function(win){var store={},doc=win.document,localStorageName="localStorage",scriptTag="script",storage;store.disabled=false;store.version="1.3.17";store.set=function(key,value){};store.get=function(key,defaultVal){};store.has=function(key){return store.get(key)!==undefined};store.remove=function(key){};store.clear=function(){};store.transact=function(key,defaultVal,transactionFn){if(transactionFn==null){transactionFn=defaultVal;defaultVal=null}if(defaultVal==null){defaultVal={}}var val=store.get(key,defaultVal);transactionFn(val);store.set(key,val)};store.getAll=function(){};store.forEach=function(){};store.serialize=function(value){return JSON.stringify(value)};store.deserialize=function(value){if(typeof value!="string"){return undefined}try{return JSON.parse(value)}catch(e){return value||undefined}};function isLocalStorageNameSupported(){try{return localStorageName in win&&win[localStorageName]}catch(err){return false}}if(isLocalStorageNameSupported()){storage=win[localStorageName];store.set=function(key,val){if(val===undefined){return store.remove(key)}storage.setItem(key,store.serialize(val));return val};store.get=function(key,defaultVal){var val=store.deserialize(storage.getItem(key));return val===undefined?defaultVal:val};store.remove=function(key){storage.removeItem(key)};store.clear=function(){storage.clear()};store.getAll=function(){var ret={};store.forEach(function(key,val){ret[key]=val});return ret};store.forEach=function(callback){for(var i=0;i<storage.length;i++){var key=storage.key(i);callback(key,store.get(key))}}}else if(doc.documentElement.addBehavior){var storageOwner,storageContainer;try{storageContainer=new ActiveXObject("htmlfile");storageContainer.open();storageContainer.write("<"+scriptTag+">document.w=window</"+scriptTag+'><iframe src="/favicon.ico"></iframe>');storageContainer.close();storageOwner=storageContainer.w.frames[0].document;storage=storageOwner.createElement("div")}catch(e){storage=doc.createElement("div");storageOwner=doc.body}var withIEStorage=function(storeFunction){return function(){var args=Array.prototype.slice.call(arguments,0);args.unshift(storage);storageOwner.appendChild(storage);storage.addBehavior("#default#userData");storage.load(localStorageName);var result=storeFunction.apply(store,args);storageOwner.removeChild(storage);return result}};var forbiddenCharsRegex=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");function ieKeyFix(key){return key.replace(/^d/,"___$&").replace(forbiddenCharsRegex,"___")}store.set=withIEStorage(function(storage,key,val){key=ieKeyFix(key);if(val===undefined){return store.remove(key)}storage.setAttribute(key,store.serialize(val));storage.save(localStorageName);return val});store.get=withIEStorage(function(storage,key,defaultVal){key=ieKeyFix(key);var val=store.deserialize(storage.getAttribute(key));return val===undefined?defaultVal:val});store.remove=withIEStorage(function(storage,key){key=ieKeyFix(key);storage.removeAttribute(key);storage.save(localStorageName)});store.clear=withIEStorage(function(storage){var attributes=storage.XMLDocument.documentElement.attributes;storage.load(localStorageName);for(var i=0,attr;attr=attributes[i];i++){storage.removeAttribute(attr.name)}storage.save(localStorageName)});store.getAll=function(storage){var ret={};store.forEach(function(key,val){ret[key]=val});return ret};store.forEach=withIEStorage(function(storage,callback){var attributes=storage.XMLDocument.documentElement.attributes;for(var i=0,attr;attr=attributes[i];++i){callback(attr.name,store.deserialize(storage.getAttribute(attr.name)))}})}try{var testKey="__storejs__";store.set(testKey,testKey);if(store.get(testKey)!=testKey){store.disabled=true}store.remove(testKey)}catch(e){store.disabled=true}store.enabled=!store.disabled;if(typeof module!="undefined"&&module.exports&&this.module!==module){module.exports=store}else if(typeof define==="function"&&define.amd){define(store)}else{win.store=store}})(Function("return this")())},{}],20:[function(require,module,exports){var debug=require("debug")("cookie");module.exports=function(name,value,options){switch(arguments.length){case 3:case 2:return set(name,value,options);case 1:return get(name);default:return all()}};function set(name,value,options){options=options||{};var str=encode(name)+"="+encode(value);if(null==value)options.maxage=-1;if(options.maxage){options.expires=new Date(+new Date+options.maxage)}if(options.path)str+="; path="+options.path;if(options.domain)str+="; domain="+options.domain;if(options.expires)str+="; expires="+options.expires.toUTCString();if(options.secure)str+="; secure";document.cookie=str}function all(){var str;try{str=document.cookie}catch(err){if(typeof console!=="undefined"&&typeof console.error==="function"){console.error(err.stack||err)}return{}}return parse(str)}function get(name){return all()[name]}function parse(str){var obj={};var pairs=str.split(/ *; */);var pair;if(""==pairs[0])return obj;for(var i=0;i<pairs.length;++i){pair=pairs[i].split("=");obj[decode(pair[0])]=decode(pair[1])}return obj}function encode(value){try{return encodeURIComponent(value)}catch(e){debug("error `encode(%o)` - %o",value,e)}}function decode(value){try{return decodeURIComponent(value)}catch(e){debug("error `decode(%o)` - %o",value,e)}}},{debug:2}],10:[function(require,module,exports){var index=require("indexof");module.exports=Emitter;function Emitter(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in Emitter.prototype){obj[key]=Emitter.prototype[key]}return obj}Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){this._callbacks=this._callbacks||{};(this._callbacks[event]=this._callbacks[event]||[]).push(fn);return this};Emitter.prototype.once=function(event,fn){var self=this;this._callbacks=this._callbacks||{};function on(){self.off(event,on);fn.apply(this,arguments)}fn._off=on;this.on(event,on);return this};Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var callbacks=this._callbacks[event];if(!callbacks)return this;if(1==arguments.length){delete this._callbacks[event];return this}var i=index(callbacks,fn._off||fn);if(~i)callbacks.splice(i,1);return this};Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks[event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;i<len;++i){callbacks[i].apply(this,args)}}return this};Emitter.prototype.listeners=function(event){this._callbacks=this._callbacks||{};return this._callbacks[event]||[]};Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}},{indexof:24}],24:[function(require,module,exports){module.exports=function(arr,obj){if(arr.indexOf)return arr.indexOf(obj);for(var i=0;i<arr.length;++i){if(arr[i]===obj)return i}return-1}},{}],11:[function(require,module,exports){var debug=require("debug")("cookie");module.exports=function(name,value,options){switch(arguments.length){case 3:case 2:return set(name,value,options);case 1:return get(name);default:return all()}};function set(name,value,options){options=options||{};var str=encode(name)+"="+encode(value);if(null==value)options.maxage=-1;if(options.maxage){options.expires=new Date(+new Date+options.maxage)}if(options.path)str+="; path="+options.path;if(options.domain)str+="; domain="+options.domain;if(options.expires)str+="; expires="+options.expires.toUTCString();if(options.secure)str+="; secure";document.cookie=str}function all(){return parse(document.cookie)}function get(name){return all()[name]}function parse(str){var obj={};var pairs=str.split(/ *; */);var pair;if(""==pairs[0])return obj;for(var i=0;i<pairs.length;++i){pair=pairs[i].split("=");obj[decode(pair[0])]=decode(pair[1])}return obj}function encode(value){try{return encodeURIComponent(value)}catch(e){debug("error `encode(%o)` - %o",value,e)}}function decode(value){try{return decodeURIComponent(value)}catch(e){debug("error `decode(%o)` - %o",value,e)}}},{debug:2}],12:[function(require,module,exports){"use strict";var defaults=function(dest,src,recursive){for(var prop in src){if(recursive&&dest[prop]instanceof Object&&src[prop]instanceof Object){dest[prop]=defaults(dest[prop],src[prop],true)}else if(!(prop in dest)){dest[prop]=src[prop]}}return dest};module.exports=defaults},{}],13:[function(require,module,exports){var encode=encodeURIComponent;var decode=decodeURIComponent;var trim=require("trim");var type=require("type");exports.parse=function(str){if("string"!=typeof str)return{};str=trim(str);if(""==str)return{};if("?"==str.charAt(0))str=str.slice(1);var obj={};var pairs=str.split("&");for(var i=0;i<pairs.length;i++){var parts=pairs[i].split("=");var key=decode(parts[0]);var m;if(m=/(\w+)\[(\d+)\]/.exec(key)){obj[m[1]]=obj[m[1]]||[];obj[m[1]][m[2]]=decode(parts[1]);continue}obj[parts[0]]=null==parts[1]?"":decode(parts[1])}return obj};exports.stringify=function(obj){if(!obj)return"";var pairs=[];for(var key in obj){var value=obj[key];if("array"==type(value)){for(var i=0;i<value.length;++i){pairs.push(encode(key+"["+i+"]")+"="+encode(value[i]))}continue}pairs.push(encode(key)+"="+encode(obj[key]))}return pairs.join("&")}},{trim:25,type:26}],25:[function(require,module,exports){exports=module.exports=trim;function trim(str){if(str.trim)return str.trim();return str.replace(/^\s*|\s*$/g,"")}exports.left=function(str){if(str.trimLeft)return str.trimLeft();return str.replace(/^\s*/,"")};exports.right=function(str){if(str.trimRight)return str.trimRight();return str.replace(/\s*$/,"")}},{}],26:[function(require,module,exports){var toString=Object.prototype.toString;module.exports=function(val){switch(toString.call(val)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}if(val===null)return"null";if(val===undefined)return"undefined";if(val!==val)return"nan";if(val&&val.nodeType===1)return"element";val=val.valueOf?val.valueOf():Object.prototype.valueOf.apply(val);return typeof val}},{}],14:[function(require,module,exports){module.exports=function uuid(a){return a?(a^Math.random()*16>>a/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,uuid)}},{}],15:[function(require,module,exports){(function(win){"use strict";var $df,$doc,$loc,$nav,$scr,$win,defaults,fd,result,webanalyser;defaults=require("defaults");fd=require("flashdetect");$win=win;$doc=$win.document;$nav=$win.navigator;$scr=$win.screen;$loc=$win.location;$df={sr:$scr.width+"x"+$scr.height,vp:$scr.availWidth+"x"+$scr.availHeight,sd:$scr.colorDepth,je:$nav.javaEnabled?$nav.javaEnabled()?1:0:0,ul:$nav.languages?$nav.languages[0]:$nav.language||$nav.userLanguage||$nav.browserLanguage};webanalyser=function(){function webanalyser(){}webanalyser.prototype.get=function(){var rst;if($df.z==null){rst={dr:$doc.referrer,dh:$loc.hostname,z:(new Date).getTime()};if(fd.installed){rst.fl=fd.major+" "+fd.minor+" "+fd.revisionStr}$df=defaults(rst,$df)}$df.dl=$loc.href;$df.dt=$doc.title;return $df};webanalyser.prototype.windowSize=function(){var rst;rst={w:0,h:0};if(typeof $win.innerWidth==="number"){rst.w=$win.innerWidth;rst.h=$win.innerHeight}else if($doc.documentElement&&($doc.documentElement.clientWidth||$doc.documentElement.clientHeight)){rst.w=$doc.documentElement.clientWidth;rst.h=$doc.documentElement.clientHeight}else if($doc.body&&($doc.body.clientWidth||$doc.body.clientHeight)){rst.w=$doc.body.clientWidth;rst.h=$doc.body.clientHeight}return rst};return webanalyser}();result=new webanalyser;return module.exports=result})(window)},{defaults:12,flashdetect:27}],27:[function(require,module,exports){var flashdetect=new function(){var self=this;self.installed=false;self.raw="";self.major=-1;self.minor=-1;self.revision=-1;self.revisionStr="";var activeXDetectRules=[{name:"ShockwaveFlash.ShockwaveFlash.7",version:function(obj){return getActiveXVersion(obj)}},{name:"ShockwaveFlash.ShockwaveFlash.6",version:function(obj){var version="6,0,21";try{obj.AllowScriptAccess="always";version=getActiveXVersion(obj)}catch(err){}return version}},{name:"ShockwaveFlash.ShockwaveFlash",version:function(obj){return getActiveXVersion(obj)}}];var getActiveXVersion=function(activeXObj){var version=-1;try{version=activeXObj.GetVariable("$version")}catch(err){}return version};var getActiveXObject=function(name){var obj=-1;try{obj=new ActiveXObject(name)}catch(err){obj={activeXError:true}}return obj};var parseActiveXVersion=function(str){var versionArray=str.split(",");return{raw:str,major:parseInt(versionArray[0].split(" ")[1],10),minor:parseInt(versionArray[1],10),revision:parseInt(versionArray[2],10),revisionStr:versionArray[2]}};var parseStandardVersion=function(str){var descParts=str.split(/ +/);var majorMinor=descParts[2].split(/\./);var revisionStr=descParts[3];return{raw:str,major:parseInt(majorMinor[0],10),minor:parseInt(majorMinor[1],10),revisionStr:revisionStr,revision:parseRevisionStrToInt(revisionStr)}};var parseRevisionStrToInt=function(str){return parseInt(str.replace(/[a-zA-Z]/g,""),10)||self.revision};self.majorAtLeast=function(version){return self.major>=version};self.minorAtLeast=function(version){return self.minor>=version};self.revisionAtLeast=function(version){return self.revision>=version};self.versionAtLeast=function(major){var properties=[self.major,self.minor,self.revision];var len=Math.min(properties.length,arguments.length);for(i=0;i<len;i++){if(properties[i]>=arguments[i]){if(i+1<len&&properties[i]==arguments[i]){continue}else{return true}}else{return false}}};self.flashdetect=function(){if(navigator.plugins&&navigator.plugins.length>0){var type="application/x-shockwave-flash";var mimeTypes=navigator.mimeTypes;if(mimeTypes&&mimeTypes[type]&&mimeTypes[type].enabledPlugin&&mimeTypes[type].enabledPlugin.description){var version=mimeTypes[type].enabledPlugin.description;var versionObj=parseStandardVersion(version);self.raw=versionObj.raw;self.major=versionObj.major;self.minor=versionObj.minor;self.revisionStr=versionObj.revisionStr;self.revision=versionObj.revision;self.installed=true}}else if(navigator.appVersion.indexOf("Mac")==-1&&window.execScript){var version=-1;for(var i=0;i<activeXDetectRules.length&&version==-1;i++){var obj=getActiveXObject(activeXDetectRules[i].name);if(!obj.activeXError){self.installed=true;version=activeXDetectRules[i].version(obj);if(version!=-1){var versionObj=parseActiveXVersion(version);self.raw=versionObj.raw;self.major=versionObj.major;self.minor=versionObj.minor;self.revision=versionObj.revision;self.revisionStr=versionObj.revisionStr}}}}}()};flashdetect.JS_RELEASE="1.0.4";module.exports=flashdetect},{}],16:[function(require,module,exports){(function(window){"use strict";var document=window.document;var queue=[];function docReady(fn){if(typeof fn!=="function"){return}if(docReady.isReady){fn()}else{queue.push(fn)}}docReady.isReady=false;function onReady(event){var isIE8NotReady=event.type==="readystatechange"&&document.readyState!=="complete";if(docReady.isReady||isIE8NotReady){return}trigger()}function trigger(){docReady.isReady=true;for(var i=0,len=queue.length;i<len;i++){var fn=queue[i];fn()}}function defineDocReady(eventie){if(document.readyState==="complete"){trigger()}else{eventie.bind(document,"DOMContentLoaded",onReady);eventie.bind(document,"readystatechange",onReady);eventie.bind(window,"load",onReady)}return docReady}if(typeof define==="function"&&define.amd){define(["eventie/eventie"],defineDocReady)}else if(typeof exports==="object"){module.exports=defineDocReady(require("eventie"))}else{window.docReady=defineDocReady(window.eventie)}})(window)},{eventie:28}],28:[function(require,module,exports){(function(window){"use strict";var docElem=document.documentElement;var bind=function(){};function getIEEvent(obj){var event=window.event;event.target=event.target||event.srcElement||obj;return event}if(docElem.addEventListener){bind=function(obj,type,fn){obj.addEventListener(type,fn,false)}}else if(docElem.attachEvent){bind=function(obj,type,fn){obj[type+fn]=fn.handleEvent?function(){var event=getIEEvent(obj);fn.handleEvent.call(fn,event)}:function(){var event=getIEEvent(obj);fn.call(obj,event)};obj.attachEvent("on"+type,obj[type+fn])}}var unbind=function(){};if(docElem.removeEventListener){unbind=function(obj,type,fn){obj.removeEventListener(type,fn,false)}}else if(docElem.detachEvent){unbind=function(obj,type,fn){obj.detachEvent("on"+type,obj[type+fn]);try{delete obj[type+fn]}catch(err){obj[type+fn]=undefined}}}var eventie={bind:bind,unbind:unbind};if(typeof define==="function"&&define.amd){define(eventie)}else if(typeof exports==="object"){module.exports=eventie}else{window.eventie=eventie}})(window)},{}],17:[function(require,module,exports){var now=require("date-now");module.exports=function debounce(func,wait,immediate){var timeout,args,context,timestamp,result;if(null==wait)wait=100;function later(){var last=now()-timestamp;if(last<wait&&last>0){timeout=setTimeout(later,wait-last)}else{timeout=null;if(!immediate){result=func.apply(context,args);if(!timeout)context=args=null}}}return function debounced(){context=this;args=arguments;timestamp=now();var callNow=immediate&&!timeout;if(!timeout)timeout=setTimeout(later,wait);if(callNow){result=func.apply(context,args);context=args=null}return result}}},{"date-now":29}],29:[function(require,module,exports){module.exports=Date.now||now;function now(){return(new Date).getTime()}},{}],18:[function(require,module,exports){var debounce,lsqueue,store;require("json-fallback");debounce=require("debounce");store=require("store.js");lsqueue=function(){function lsqueue(name){var self;self=this;self.qn=name||"queue";self.items=[];self.persist=debounce(function(){if(!store.enabled){return self}try{store.set(self.qn,self.items)}catch(_error){}return self},111);return self}lsqueue.prototype.push=function(v){var self;self=this;self.items.push(v);self.persist();return self};lsqueue.prototype.pop=function(){var rst,self;self=this;if(self.items.length>0){rst=self.items.shift();self.persist();return rst}};lsqueue.prototype.clear=function(){var self;self=this;self.items=[];self.persist();return self};return lsqueue}();module.exports=lsqueue},{"json-fallback":30,debounce:17,"store.js":19}],30:[function(require,module,exports){(function(){"use strict";var JSON=module.exports={};function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var cx,escapable,gap,indent,meta,rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else if(typeof space==="string"){indent=space}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}})()},{}],5:[function(require,module,exports){var domify=require("domify");var each=require("each");var events=require("event");var getKeys=require("keys");var query=require("query");var trim=require("trim");var slice=[].slice;var isArray=Array.isArray||function(val){return!!val&&"[object Array]"===Object.prototype.toString.call(val)};var attrs=["id","src","rel","cols","rows","type","name","href","title","style","width","height","action","method","tabindex","placeholder"];

var quickExpr=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/;module.exports=dom;function dom(selector,context){if(isArray(selector)){return new List(selector)}if(selector instanceof List){return selector}if(selector.nodeName){return new List([selector])}if("string"!=typeof selector){throw new TypeError("invalid selector")}var htmlselector=trim.left(selector);if(isHTML(htmlselector)){return new List([domify(htmlselector)],htmlselector)}var ctx=context?context instanceof List?context[0]:context:document;return new List(query.all(selector,ctx),selector)}dom.List=List;dom.attrs=attrs;dom.use=function(name,fn){var keys=[];var tmp;if(2==arguments.length){keys.push(name);tmp={};tmp[name]=fn;fn=tmp}else if(name.name){fn=name;name=name.name;keys.push(name);tmp={};tmp[name]=fn;fn=tmp}else{keys=getKeys(name);fn=name}for(var i=0,len=keys.length;i<len;i++){List.prototype[keys[i]]=fn[keys[i]]}return this};function List(els,selector){els=els||[];var len=this.length=els.length;for(var i=0;i<len;i++)this[i]=els[i];this.selector=selector}List.prototype.dom=dom;List.prototype.length=0;List.prototype.splice=Array.prototype.splice;List.prototype.toArray=function(){return slice.call(this)};each(attrs,function(name){List.prototype[name]=function(val){if(0==arguments.length)return this.attr(name);return this.attr(name,val)}});dom.use(require("./lib/attributes"));dom.use(require("./lib/classes"));dom.use(require("./lib/events"));dom.use(require("./lib/manipulate"));dom.use(require("./lib/traverse"));function isHTML(str){if(str.charAt(0)==="<"&&str.charAt(str.length-1)===">"&&str.length>=3)return true;var match=quickExpr.exec(str);return!!(match&&match[1])}},{domify:31,each:32,event:33,keys:34,query:35,trim:25,"./lib/attributes":36,"./lib/classes":37,"./lib/events":38,"./lib/manipulate":39,"./lib/traverse":40}],31:[function(require,module,exports){module.exports=parse;var div=document.createElement("div");div.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>';var innerHTMLBug=!div.getElementsByTagName("link").length;div=undefined;var map={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:innerHTMLBug?[1,"X<div>","</div>"]:[0,"",""]};map.td=map.th=[3,"<table><tbody><tr>","</tr></tbody></table>"];map.option=map.optgroup=[1,'<select multiple="multiple">',"</select>"];map.thead=map.tbody=map.colgroup=map.caption=map.tfoot=[1,"<table>","</table>"];map.polyline=map.ellipse=map.polygon=map.circle=map.text=map.line=map.path=map.rect=map.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];function parse(html,doc){if("string"!=typeof html)throw new TypeError("String expected");if(!doc)doc=document;var m=/<([\w:]+)/.exec(html);if(!m)return doc.createTextNode(html);html=html.replace(/^\s+|\s+$/g,"");var tag=m[1];if(tag=="body"){var el=doc.createElement("html");el.innerHTML=html;return el.removeChild(el.lastChild)}var wrap=map[tag]||map._default;var depth=wrap[0];var prefix=wrap[1];var suffix=wrap[2];var el=doc.createElement("div");el.innerHTML=prefix+html+suffix;while(depth--)el=el.lastChild;if(el.firstChild==el.lastChild){return el.removeChild(el.firstChild)}var fragment=doc.createDocumentFragment();while(el.firstChild){fragment.appendChild(el.removeChild(el.firstChild))}return fragment}},{}],32:[function(require,module,exports){try{var type=require("type")}catch(err){var type=require("component-type")}var toFunction=require("to-function");var has=Object.prototype.hasOwnProperty;module.exports=function(obj,fn,ctx){fn=toFunction(fn);ctx=ctx||this;switch(type(obj)){case"array":return array(obj,fn,ctx);case"object":if("number"==typeof obj.length)return array(obj,fn,ctx);return object(obj,fn,ctx);case"string":return string(obj,fn,ctx)}};function string(obj,fn,ctx){for(var i=0;i<obj.length;++i){fn.call(ctx,obj.charAt(i),i)}}function object(obj,fn,ctx){for(var key in obj){if(has.call(obj,key)){fn.call(ctx,key,obj[key])}}}function array(obj,fn,ctx){for(var i=0;i<obj.length;++i){fn.call(ctx,obj[i],i)}}},{type:41,"component-type":41,"to-function":42}],41:[function(require,module,exports){var toString=Object.prototype.toString;module.exports=function(val){switch(toString.call(val)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object String]":return"string"}if(val===null)return"null";if(val===undefined)return"undefined";if(val&&val.nodeType===1)return"element";if(val===Object(val))return"object";return typeof val}},{}],42:[function(require,module,exports){var expr;try{expr=require("props")}catch(e){expr=require("component-props")}module.exports=toFunction;function toFunction(obj){switch({}.toString.call(obj)){case"[object Object]":return objectToFunction(obj);case"[object Function]":return obj;case"[object String]":return stringToFunction(obj);case"[object RegExp]":return regexpToFunction(obj);default:return defaultToFunction(obj)}}function defaultToFunction(val){return function(obj){return val===obj}}function regexpToFunction(re){return function(obj){return re.test(obj)}}function stringToFunction(str){if(/^ *\W+/.test(str))return new Function("_","return _ "+str);return new Function("_","return "+get(str))}function objectToFunction(obj){var match={};for(var key in obj){match[key]=typeof obj[key]==="string"?defaultToFunction(obj[key]):toFunction(obj[key])}return function(val){if(typeof val!=="object")return false;for(var key in match){if(!(key in val))return false;if(!match[key](val[key]))return false}return true}}function get(str){var props=expr(str);if(!props.length)return"_."+str;var val,i,prop;for(i=0;i<props.length;i++){prop=props[i];val="_."+prop;val="('function' == typeof "+val+" ? "+val+"() : "+val+")";str=stripNested(prop,str,val)}return str}function stripNested(prop,str,val){return str.replace(new RegExp("(\\.)?"+prop,"g"),function($0,$1){return $1?$0:val})}},{props:43,"component-props":43}],43:[function(require,module,exports){var globals=/\b(this|Array|Date|Object|Math|JSON)\b/g;module.exports=function(str,fn){var p=unique(props(str));if(fn&&"string"==typeof fn)fn=prefixed(fn);if(fn)return map(str,p,fn);return p};function props(str){return str.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\//g,"").replace(globals,"").match(/[$a-zA-Z_]\w*/g)||[]}function map(str,props,fn){var re=/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\/|[a-zA-Z_]\w*/g;return str.replace(re,function(_){if("("==_[_.length-1])return fn(_);if(!~props.indexOf(_))return _;return fn(_)})}function unique(arr){var ret=[];for(var i=0;i<arr.length;i++){if(~ret.indexOf(arr[i]))continue;ret.push(arr[i])}return ret}function prefixed(str){return function(_){return str+_}}},{}],33:[function(require,module,exports){var bind=window.addEventListener?"addEventListener":"attachEvent",unbind=window.removeEventListener?"removeEventListener":"detachEvent",prefix=bind!=="addEventListener"?"on":"";exports.bind=function(el,type,fn,capture){el[bind](prefix+type,fn,capture||false);return fn};exports.unbind=function(el,type,fn,capture){el[unbind](prefix+type,fn,capture||false);return fn}},{}],34:[function(require,module,exports){var has=Object.prototype.hasOwnProperty;module.exports=Object.keys||function(obj){var keys=[];for(var key in obj){if(has.call(obj,key)){keys.push(key)}}return keys}},{}],35:[function(require,module,exports){function one(selector,el){return el.querySelector(selector)}exports=module.exports=function(selector,el){el=el||document;return one(selector,el)};exports.all=function(selector,el){el=el||document;return el.querySelectorAll(selector)};exports.engine=function(obj){if(!obj.one)throw new Error(".one callback required");if(!obj.all)throw new Error(".all callback required");one=obj.one;exports.all=obj.all;return exports}},{}],36:[function(require,module,exports){var value=require("value");exports.attr=function(name,val){if(1==arguments.length){return this[0]&&this[0].getAttribute(name)}if(null==val){return this.removeAttr(name)}return this.forEach(function(el){el.setAttribute(name,val)})};exports.removeAttr=function(name){return this.forEach(function(el){el.removeAttribute(name)})};exports.prop=function(name,val){if(1==arguments.length){return this[0]&&this[0][name]}return this.forEach(function(el){el[name]=val})};exports.val=exports.value=function(val){if(0==arguments.length){return this[0]?value(this[0]):undefined}return this.forEach(function(el){value(el,val)})}},{value:44}],44:[function(require,module,exports){var typeOf=require("type");module.exports=function(el,val){if(2==arguments.length)return set(el,val);return get(el)};function get(el){switch(type(el)){case"checkbox":case"radio":if(el.checked){var attr=el.getAttribute("value");return null==attr?true:attr}else{return false}case"radiogroup":for(var i=0,radio;radio=el[i];i++){if(radio.checked)return radio.value}break;case"select":for(var i=0,option;option=el.options[i];i++){if(option.selected)return option.value}break;default:return el.value}}function set(el,val){switch(type(el)){case"checkbox":case"radio":if(val){el.checked=true}else{el.checked=false}break;case"radiogroup":for(var i=0,radio;radio=el[i];i++){radio.checked=radio.value===val}break;case"select":for(var i=0,option;option=el.options[i];i++){option.selected=option.value===val}break;default:el.value=val}}function type(el){var group="array"==typeOf(el)||"object"==typeOf(el);if(group)el=el[0];var name=el.nodeName.toLowerCase();var type=el.getAttribute("type");if(group&&type&&"radio"==type.toLowerCase())return"radiogroup";if("input"==name&&type&&"checkbox"==type.toLowerCase())return"checkbox";if("input"==name&&type&&"radio"==type.toLowerCase())return"radio";if("select"==name)return"select";return name}},{type:26}],37:[function(require,module,exports){var classes=require("classes");exports.addClass=function(name){return this.forEach(function(el){el._classes=el._classes||classes(el);el._classes.add(name)})};exports.removeClass=function(name){return this.forEach(function(el){el._classes=el._classes||classes(el);el._classes.remove(name)})};exports.toggleClass=function(name,bool){var fn="toggle";if(2==arguments.length){fn=bool?"add":"remove"}return this.forEach(function(el){el._classes=el._classes||classes(el);el._classes[fn](name)})};exports.hasClass=function(name){var el;for(var i=0,len=this.length;i<len;i++){el=this[i];el._classes=el._classes||classes(el);if(el._classes.has(name))return true}return false}},{classes:45}],45:[function(require,module,exports){var index=require("indexof");var re=/\s+/;var toString=Object.prototype.toString;module.exports=function(el){return new ClassList(el)};function ClassList(el){if(!el||!el.nodeType){throw new Error("A DOM element reference is required")}this.el=el;this.list=el.classList}ClassList.prototype.add=function(name){if(this.list){this.list.add(name);return this}var arr=this.array();var i=index(arr,name);if(!~i)arr.push(name);this.el.className=arr.join(" ");return this};ClassList.prototype.remove=function(name){if("[object RegExp]"==toString.call(name)){return this.removeMatching(name)}if(this.list){this.list.remove(name);return this}var arr=this.array();var i=index(arr,name);if(~i)arr.splice(i,1);this.el.className=arr.join(" ");return this};ClassList.prototype.removeMatching=function(re){var arr=this.array();for(var i=0;i<arr.length;i++){if(re.test(arr[i])){this.remove(arr[i])}}return this};ClassList.prototype.toggle=function(name,force){if(this.list){if("undefined"!==typeof force){if(force!==this.list.toggle(name,force)){this.list.toggle(name)}}else{this.list.toggle(name)}return this}if("undefined"!==typeof force){if(!force){this.remove(name)}else{this.add(name)}}else{if(this.has(name)){this.remove(name)}else{this.add(name)}}return this};ClassList.prototype.array=function(){var str=this.el.className.replace(/^\s+|\s+$/g,"");var arr=str.split(re);if(""===arr[0])arr.shift();return arr};ClassList.prototype.has=ClassList.prototype.contains=function(name){return this.list?this.list.contains(name):!!~index(this.array(),name)}},{indexof:24}],38:[function(require,module,exports){var events=require("event");var delegate=require("delegate");exports.on=function(event,selector,fn,capture){if("string"==typeof selector){return this.forEach(function(el){fn._delegate=delegate.bind(el,selector,event,fn,capture)})}capture=fn;fn=selector;return this.forEach(function(el){events.bind(el,event,fn,capture)})};exports.off=function(event,selector,fn,capture){if("string"==typeof selector){return this.forEach(function(el){delegate.unbind(el,event,fn._delegate,capture)})}capture=fn;fn=selector;return this.forEach(function(el){events.unbind(el,event,fn,capture)})}},{event:33,delegate:46}],46:[function(require,module,exports){var closest=require("closest"),event=require("event");exports.bind=function(el,selector,type,fn,capture){return event.bind(el,type,function(e){var target=e.target||e.srcElement;e.delegateTarget=closest(target,selector,true,el);if(e.delegateTarget)fn.call(el,e)},capture)};exports.unbind=function(el,type,fn,capture){event.unbind(el,type,fn,capture)}},{closest:47,event:33}],47:[function(require,module,exports){var matches=require("matches-selector");module.exports=closest;function closest(el,selector,scope){scope=scope||document.documentElement;while(el&&el!==scope){if(matches(el,selector))return el;el=el.parentNode}return matches(el,selector)?el:null}},{"matches-selector":48}],48:[function(require,module,exports){var query=require("query");var proto=Element.prototype;var vendor=proto.matches||proto.webkitMatchesSelector||proto.mozMatchesSelector||proto.msMatchesSelector||proto.oMatchesSelector;module.exports=match;function match(el,selector){if(!el||el.nodeType!==1)return false;if(vendor)return vendor.call(el,selector);var nodes=query.all(selector,el.parentNode);for(var i=0;i<nodes.length;++i){if(nodes[i]==el)return true}return false}},{query:35}],39:[function(require,module,exports){var value=require("value");var css=require("css");var text=require("text");exports.text=function(str){if(1==arguments.length){return this.forEach(function(el){if(11==el.nodeType){var node;while(node=el.firstChild)el.removeChild(node);el.appendChild(document.createTextNode(str))}else{text(el,str)}})}var out="";this.forEach(function(el){if(11==el.nodeType){out+=getText(el.firstChild)}else{out+=text(el)}});return out};function getText(el){var ret="";var type=el.nodeType;var node;switch(type){case 1:case 9:ret=text(el);break;case 11:ret=el.textContent||el.innerText;break;case 3:case 4:return el.nodeValue;default:while(node=el[i++]){ret+=getText(node)}}return ret}exports.html=function(html){if(1==arguments.length){return this.forEach(function(el){el.innerHTML=html})}return this[0]&&this[0].innerHTML};exports.css=function(prop,val){if(!val&&"object"!=typeof prop){return css(this[0],prop)}this.forEach(function(el){css(el,prop,val)});return this};exports.prepend=function(val){var dom=this.dom;this.forEach(function(target,i){dom(val).forEach(function(selector){selector=i?selector.cloneNode(true):selector;if(target.children.length){target.insertBefore(selector,target.firstChild)}else{target.appendChild(selector)}})});return this};exports.append=function(val){var dom=this.dom;this.forEach(function(target,i){dom(val).forEach(function(el){el=i?el.cloneNode(true):el;target.appendChild(el)})});return this};exports.insertAfter=function(val){var dom=this.dom;this.forEach(function(el){dom(val).forEach(function(target,i){if(!target.parentNode)return;el=i?el.cloneNode(true):el;target.parentNode.insertBefore(el,target.nextSibling)})});return this};exports.appendTo=function(val){this.dom(val).append(this);return this};exports.replace=function(val){var self=this;var list=this.dom(val);list.forEach(function(el,i){var old=self[i];var parent=old.parentNode;if(!parent)return;el=i?el.cloneNode(true):el;parent.replaceChild(el,old)});return this};exports.empty=function(){return this.forEach(function(el){text(el,"")})};exports.remove=function(){return this.forEach(function(el){var parent=el.parentNode;if(parent)parent.removeChild(el)})};exports.clone=function(){var out=this.map(function(el){return el.cloneNode(true)});return this.dom(out)};exports.focus=function(){this[0].focus();return this}},{value:44,css:49,text:50}],49:[function(require,module,exports){var debug=require("debug")("css");var set=require("./lib/style");var get=require("./lib/css");module.exports=css;function css(el,prop,val){if(!el)return;if(undefined!==val){var obj={};obj[prop]=val;debug("setting styles %j",obj);return setStyles(el,obj)}if("object"==typeof prop){debug("setting styles %j",prop);return setStyles(el,prop)}debug("getting %s",prop);return get(el,prop)}function setStyles(el,props){for(var prop in props){set(el,prop,props[prop])}return el}},{debug:2,"./lib/style":51,"./lib/css":52}],51:[function(require,module,exports){var debug=require("debug")("css:style");var camelcase=require("to-camel-case");var support=require("./support");var property=require("./prop");var hooks=require("./hooks");module.exports=style;var cssNumber={columnCount:true,fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true};function style(el,prop,val,extra){if(!el||el.nodeType===3||el.nodeType===8||!el.style)return;var orig=camelcase(prop);var style=el.style;var type=typeof val;if(!val)return get(el,prop,orig,extra);prop=property(prop,style);var hook=hooks[prop]||hooks[orig];if("number"==type&&!cssNumber[orig]){debug('adding "px" to end of number');val+="px"}if(!support.clearCloneStyle&&""===val&&0===prop.indexOf("background")){debug('set property (%s) value to "inherit"',prop);style[prop]="inherit"}if(!hook||!hook.set||undefined!==(val=hook.set(el,val,extra))){debug("set hook defined. setting property (%s) to %s",prop,val);style[prop]="";style[prop]=val}}function get(el,prop,orig,extra){var style=el.style;var hook=hooks[prop]||hooks[orig];var ret;if(hook&&hook.get&&undefined!==(ret=hook.get(el,false,extra))){debug("get hook defined, returning: %s",ret);return ret}ret=style[prop];debug("getting %s",ret);return ret}},{debug:2,"to-camel-case":53,"./support":54,"./prop":55,"./hooks":56}],53:[function(require,module,exports){var toSpace=require("to-space-case");module.exports=toCamelCase;function toCamelCase(string){return toSpace(string).replace(/\s(\w)/g,function(matches,letter){return letter.toUpperCase()})}},{"to-space-case":57}],57:[function(require,module,exports){var clean=require("to-no-case");module.exports=toSpaceCase;function toSpaceCase(string){return clean(string).replace(/[\W_]+(.|$)/g,function(matches,match){return match?" "+match:""})}},{"to-no-case":58}],58:[function(require,module,exports){module.exports=toNoCase;var hasSpace=/\s/;var hasCamel=/[a-z][A-Z]/;var hasSeparator=/[\W_]/;function toNoCase(string){if(hasSpace.test(string))return string.toLowerCase();if(hasSeparator.test(string))string=unseparate(string);if(hasCamel.test(string))string=uncamelize(string);return string.toLowerCase()}var separatorSplitter=/[\W_]+(.|$)/g;function unseparate(string){return string.replace(separatorSplitter,function(m,next){return next?" "+next:""})}var camelSplitter=/(.)([A-Z]+)/g;function uncamelize(string){return string.replace(camelSplitter,function(m,previous,uppers){return previous+" "+uppers.toLowerCase().split("").join(" ")})}},{}],54:[function(require,module,exports){var reliableMarginRight;var boxSizingReliableVal;var pixelPositionVal;var clearCloneStyle;var docElem=document.documentElement;var container=document.createElement("div");var div=document.createElement("div");div.style.backgroundClip="content-box";div.cloneNode(true).style.backgroundClip="";exports.clearCloneStyle=div.style.backgroundClip==="content-box";container.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px";container.appendChild(div);exports.pixelPosition=function(){if(undefined==pixelPositionVal)computePixelPositionAndBoxSizingReliable();return pixelPositionVal};exports.boxSizingReliable=function(){if(undefined==boxSizingReliableVal)computePixelPositionAndBoxSizingReliable();return boxSizingReliableVal};exports.reliableMarginRight=function(){var ret;var marginDiv=div.appendChild(document.createElement("div"));marginDiv.style.cssText=div.style.cssText=divReset;marginDiv.style.marginRight=marginDiv.style.width="0";div.style.width="1px";docElem.appendChild(container);ret=!parseFloat(window.getComputedStyle(marginDiv,null).marginRight);docElem.removeChild(container);div.innerHTML="";return ret};function computePixelPositionAndBoxSizingReliable(){div.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;"+"box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;"+"position:absolute;top:1%";docElem.appendChild(container);var divStyle=window.getComputedStyle(div,null);pixelPositionVal=divStyle.top!=="1%";boxSizingReliableVal=divStyle.width==="4px";docElem.removeChild(container)}},{}],55:[function(require,module,exports){var debug=require("debug")("css:prop");var camelcase=require("to-camel-case");var vendor=require("./vendor");module.exports=prop;var cssProps={"float":"cssFloat"in document.documentElement.style?"cssFloat":"styleFloat"};function prop(prop,style){prop=cssProps[prop]||(cssProps[prop]=vendor(prop,style));debug("transform property: %s => %s",prop,style);return prop}},{debug:2,"to-camel-case":53,"./vendor":59}],59:[function(require,module,exports){var prefixes=["Webkit","O","Moz","ms"];module.exports=vendor;function vendor(prop,style){if(style[prop])return prop;var capName=prop[0].toUpperCase()+prop.slice(1);var original=prop;var i=prefixes.length;while(i--){prop=prefixes[i]+capName;if(prop in style)return prop}return original}},{}],56:[function(require,module,exports){var each=require("each");var css=require("./css");var cssShow={position:"absolute",visibility:"hidden",display:"block"};var pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source;var rnumnonpx=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i");var rnumsplit=new RegExp("^("+pnum+")(.*)$","i");var rdisplayswap=/^(none|table(?!-c[ea]).+)/;var styles=require("./styles");var support=require("./support");var swap=require("./swap");var computed=require("./computed");var cssExpand=["Top","Right","Bottom","Left"];each(["width","height"],function(name){exports[name]={};exports[name].get=function(el,compute,extra){if(!compute)return;return 0==el.offsetWidth&&rdisplayswap.test(css(el,"display"))?swap(el,cssShow,function(){return getWidthOrHeight(el,name,extra)}):getWidthOrHeight(el,name,extra)};exports[name].set=function(el,val,extra){var styles=extra&&styles(el);return setPositiveNumber(el,val,extra?augmentWidthOrHeight(el,name,extra,"border-box"==css(el,"boxSizing",false,styles),styles):0)}});exports.opacity={};exports.opacity.get=function(el,compute){if(!compute)return;var ret=computed(el,"opacity");return""==ret?"1":ret};function setPositiveNumber(el,val,subtract){var matches=rnumsplit.exec(val);return matches?Math.max(0,matches[1])+(matches[2]||"px"):val}function getWidthOrHeight(el,prop,extra){var valueIsBorderBox=true;var val=prop==="width"?el.offsetWidth:el.offsetHeight;var styles=computed(el);var isBorderBox=support.boxSizing&&css(el,"boxSizing")==="border-box";if(val<=0||val==null){val=computed(el,prop,styles);if(val<0||val==null){val=el.style[prop]}if(rnumnonpx.test(val)){return val}valueIsBorderBox=isBorderBox&&(support.boxSizingReliable()||val===el.style[prop]);val=parseFloat(val)||0}extra=extra||(isBorderBox?"border":"content");val+=augmentWidthOrHeight(el,prop,extra,valueIsBorderBox,styles);return val+"px"}function augmentWidthOrHeight(el,prop,extra,isBorderBox,styles){var i=extra===(isBorderBox?"border":"content")?4:"width"==prop?1:0;var val=0;for(;i<4;i+=2){if(extra==="margin"){val+=css(el,extra+cssExpand[i],true,styles)}if(isBorderBox){if(extra==="content"){val-=css(el,"padding"+cssExpand[i],true,styles)}if(extra!=="margin"){val-=css(el,"border"+cssExpand[i]+"Width",true,styles)}}else{val+=css(el,"padding"+cssExpand[i],true,styles);if(extra!=="padding"){val+=css(el,"border"+cssExpand[i]+"Width",true,styles)}}}return val}},{each:32,"./css":52,"./styles":60,"./support":54,"./swap":61,"./computed":62}],52:[function(require,module,exports){var debug=require("debug")("css:css");var camelcase=require("to-camel-case");var computed=require("./computed");var property=require("./prop");module.exports=css;var cssNormalTransform={letterSpacing:0,fontWeight:400};function css(el,prop,extra,styles){var hooks=require("./hooks");var orig=camelcase(prop);var style=el.style;var val;prop=property(prop,style);var hook=hooks[prop]||hooks[orig];if(hook&&hook.get){debug("get hook provided. use that");val=hook.get(el,true,extra)}if(undefined==val){debug("fetch the computed value of %s",prop);val=computed(el,prop)}if("normal"==val&&cssNormalTransform[prop]){val=cssNormalTransform[prop];debug("normal => %s",val)}if(""==extra||extra){debug("converting value: %s into a number",val);var num=parseFloat(val);return true===extra||isNumeric(num)?num||0:val}return val}function isNumeric(obj){return!isNan(parseFloat(obj))&&isFinite(obj)}},{debug:2,"to-camel-case":53,"./computed":62,"./prop":55,"./hooks":56}],62:[function(require,module,exports){var debug=require("debug")("css:computed");var withinDocument=require("within-document");var styles=require("./styles");module.exports=computed;function computed(el,prop,precomputed){var computed=precomputed||styles(el);var ret;if(!computed)return;if(computed.getPropertyValue){ret=computed.getPropertyValue(prop)||computed[prop]}else{ret=computed[prop]}if(""===ret&&!withinDocument(el)){debug("element not within document, try finding from style attribute");var style=require("./style");ret=style(el,prop)}debug("computed value of %s: %s",prop,ret);return undefined===ret?ret:ret+""}},{debug:2,"within-document":63,"./styles":60,"./style":51}],63:[function(require,module,exports){module.exports=function(el){var node=el;while(node=node.parentNode){if(node==document)return true}return false}},{}],60:[function(require,module,exports){module.exports=styles;function styles(el){if(window.getComputedStyle){return el.ownerDocument.defaultView.getComputedStyle(el,null)}else{return el.currentStyle}}},{}],61:[function(require,module,exports){module.exports=swap;function swap(el,options,fn,args){for(var key in options){old[key]=el.style[key];el.style[key]=options[key]}ret=fn.apply(el,args||[]);for(key in options){el.style[key]=old[key]}return ret}},{}],50:[function(require,module,exports){var text="innerText"in document.createElement("div")?"innerText":"textContent";module.exports=function(el,val){if(val==null)return el[text];el[text]=val}},{}],40:[function(require,module,exports){var proto=Array.prototype;var each=require("each");var traverse=require("traverse");var toFunction=require("to-function");var matches=require("matches-selector");exports.find=function(selector){return this.dom(selector,this)};exports.is=function(selector){for(var i=0,el;el=this[i];i++){if(matches(el,selector))return true}return false};exports.parent=function(selector,limit){return this.dom(traverse("parentNode",this[0],selector,limit||1))};exports.next=function(selector,limit){return this.dom(traverse("nextSibling",this[0],selector,limit||1))};exports.prev=exports.previous=function(selector,limit){return this.dom(traverse("previousSibling",this[0],selector,limit||1))};exports.each=function(fn){var dom=this.dom;for(var i=0,list,len=this.length;i<len;i++){list=dom(this[i]);fn.call(list,list,i)}return this};exports.forEach=function(fn){for(var i=0,len=this.length;i<len;i++){fn.call(this[i],this[i],i)}return this};exports.map=function(fn){fn=toFunction(fn);var dom=this.dom;var out=[];for(var i=0,len=this.length;i<len;i++){out.push(fn.call(dom(this[i]),this[i],i))}return this.dom(out)};exports.filter=exports.select=function(fn){fn=toFunction(fn);var dom=this.dom;var out=[];var val;for(var i=0,len=this.length;i<len;i++){val=fn.call(dom(this[i]),this[i],i);if(val)out.push(this[i])}return this.dom(out)};exports.reject=function(fn){var dom=this.dom;var out=[];var len=this.length;var val,i;if("string"==typeof fn)fn=toFunction(fn);if(fn){for(i=0;i<len;i++){val=fn.call(dom(this[i]),this[i],i);if(!val)out.push(this[i])}}else{for(i=0;i<len;i++){if(this[i]!=fn)out.push(this[i])}}return this.dom(out)};exports.at=function(i){return this.dom(this[i])};exports.first=function(){return this.dom(this[0])};exports.last=function(){return this.dom(this[this.length-1])};each(["push","pop","shift","splice","unshift","reverse","sort","toString","concat","join","slice"],function(method){exports[method]=function(){return proto[method].apply(this.toArray(),arguments)}})},{each:32,traverse:64,"to-function":42,"matches-selector":65}],64:[function(require,module,exports){var matches=require("matches-selector");module.exports=function(type,el,selector,len){var el=el[type],n=len||1,ret=[];if(!el)return ret;do{if(n==ret.length)break;if(1!=el.nodeType)continue;if(matches(el,selector))ret.push(el);if(!selector)ret.push(el)}while(el=el[type]);return ret}},{"matches-selector":48}],65:[function(require,module,exports){var query=require("query");var proto=Element.prototype;var vendor=proto.matches||proto.webkitMatchesSelector||proto.mozMatchesSelector||proto.msMatchesSelector||proto.oMatchesSelector;module.exports=match;function match(el,selector){if(vendor)return vendor.call(el,selector);var nodes=query.all(selector,el.parentNode);for(var i=0;i<nodes.length;++i){if(nodes[i]==el)return true}return false}},{query:35}],6:[function(require,module,exports){(function(){var $doc,$win,_tk,circplusTemplate,gmodal2,gsnSw,gsndfpfactory,loadScript,qsel,swcss,trakless2;trakless2=require("trakless");gmodal2=require("gmodal");loadScript=require("load-script");qsel=require("dom");swcss=require("./sw.css");circplusTemplate=require("./circplus.html");$win=window;_tk=$win._tk;$doc=$win.document;gsnSw=null;gsndfpfactory=function(){function gsndfpfactory(){}gsndfpfactory.prototype.dfpID="";gsndfpfactory.prototype.count=0;gsndfpfactory.prototype.rendered=0;gsndfpfactory.prototype.sel=".gsnunit";gsndfpfactory.prototype.dopts={};gsndfpfactory.prototype.isLoaded=false;gsndfpfactory.prototype.$ads=void 0;gsndfpfactory.prototype.adBlockerOn=false;gsndfpfactory.prototype.storeAs="gsnunit";gsndfpfactory.prototype.lastRefresh=0;gsndfpfactory.prototype.didOpen=false;gsndfpfactory.prototype.isVisible=false;gsndfpfactory.prototype.ieOld=false;gsndfpfactory.prototype.bodyTemplate=circplusTemplate;gsndfpfactory.prototype.refresh=function(options){var self;self=this;self.dfpLoader();self.dfpID=gsndfp.getNetworkId(true);self.setOptions(options||{});_tk.util.ready(function(){return self.doIt()});return this};gsndfpfactory.prototype.doIt=function(){var cp,currentTime,self,slot1;self=this;self.sel=self.dopts.sel||".gsnunit";if(typeof self.adUnitById!=="object"){self.adUnitById={}}if(!($win.opera&&$win.opera.version)){self.ieOld=$doc.all&&!$win.atop}if(self.ieOld){self.dopts.inViewOnly=false}if(self.sel===".circplus"){self.storeAs="circplus";cp=qsel(self.sel);slot1=qsel(".cpslot1");if(cp.length>0){if(!slot1[0]){cp.html(self.dopts.bodyTemplate||self.bodyTemplate)}}self.$ads=[qsel(".cpslot1")[0],qsel(".cpslot2")[0]];if(self.$ads[0]!=null){self.createAds().displayAds()}}else if(self.sel===".gsnsw"){self.dopts.inViewOnly=false;gsnSw=self;self.dopts.enableSingleRequest=true;self.dfpID=gsndfp.getNetworkId();if(qsel(self.dopts.displayWhenExists||".gsnunit").length<=0){return}self.storeAs="gsnsw";if(self.didOpen||self.getCookie("gsnsw2")!=null){setTimeout(function(){return self.onCloseCallback({cancel:true})},200)}else{currentTime=(new Date).getTime();if(currentTime-self.lastRefresh<2e3){return self}self.lastRefresh=currentTime;setTimeout(function(){return self.getPopup(self.sel)},200)}return self}else{self.storeAs="gsnunit";self.$ads=qsel(self.sel);self.createAds().displayAds();

}return this};gsndfpfactory.prototype.setOptions=function(ops){var dopts,k,self,v;self=this;dopts={setTargeting:{},setCategoryExclusion:"",setLocation:"",enableSingleRequest:false,collapseEmptyDivs:true,refreshExisting:true,disablePublisherConsole:false,disableInitialLoad:false,inViewOnly:true,noFetch:false,sizeMapping:{leaderboard:[{browser:[980,600],ad_sizes:[[728,90],[640,480]]},{browser:[0,0],ad_sizes:[[320,50]]}],box:[{browser:[980,600],ad_sizes:[[300,250],[250,250]]},{browser:[0,0],ad_sizes:[[180,150]]}],skyscraper:[{browser:[980,600],ad_sizes:[[160,600],[120,600]]},{browser:[0,0],ad_sizes:[[120,240]]}]}};for(k in ops){v=ops[k];dopts[k]=v}self.dopts=dopts;return this};gsndfpfactory.prototype.onOpenCallback=function(evt){var self;self=gsnSw;gsndfp.on("clickBrand",function(e){$win.gmodal.hide()});self.didOpen=true;self.isVisible=true;self.$ads=qsel(self.sel);self.createAds().displayAds();qsel("#sw .remove").remove();if(self.adBlockerOn){qsel("#sw .sw-msg")[0].style.display="block";qsel("#sw .sw-header-copy")[0].style.display="none";qsel("#sw .sw-row")[0].style.display="none";qsel("#sw")[0].className+=" blocked"}return self};gsndfpfactory.prototype.onCloseCallback=function(evt){var self;self=gsnSw;self.isVisible=false;if(!self.getCookie("gsnsw2")){self.setCookie("gsnsw2",gsndfp.gsnNetworkId+","+gsndfp.enableCircPlus+","+gsndfp.disableSw,gsndfp.expireHours)}if(typeof self.dopts.onClose==="function"){self.dopts.onClose(self.didOpen)}return self};gsndfpfactory.prototype.swSucccess=function(svrRsp){var data,evt,rsp,self;$win.gsnswCallback=null;rsp=svrRsp;if(typeof svrRsp==="string"){rsp=JSON.parse(svrRsp)}self=gsnSw;if(rsp){if(!gsndfp.gsnNetworkId){gsndfp.gsnNetworkId=rsp.NetworkId}gsndfp.enableCircPlus=rsp.EnableCircPlus;gsndfp.disableSw=rsp.DisableSw;gsndfp.expireHours=rsp.ExpireHours;data=rsp.Template}self.dfpID=gsndfp.getNetworkId();evt={data:rsp,cancel:false};self.dopts.onData(evt);if(evt.cancel){data=null}if(data){data=data.replace(/%%CACHEBUSTER%%/g,(new Date).getTime()).replace(/%%CHAINID%%/g,gsndfp.gsnid);if(!self.rect&&$doc.documentElement!=null){self.rect={w:Math.max($doc.documentElement.clientWidth,$win.innerWidth||0),h:Math.max($doc.documentElement.clientHeight,$win.innerHeight||0)}}if($win.gmodal.show({content:"<div id='sw'>"+data+"<div>",closeCls:"sw-close",hideOn:gsndfp.hideOn||""},self.onCloseCallback)){$win.gmodal.injectStyle("swcss",swcss);self.onOpenCallback()}}else{self.onCloseCallback({cancel:true})}return this};gsndfpfactory.prototype.getPopup=function(){var dataType,self,url;self=this;url=gsndfp.apiUrl+"/ShopperWelcome/Get/"+gsndfp.gsnid;dataType="json";$win.gsnswCallback=function(rsp){return self.swSucccess(rsp)};url+="?callback=gsnswCallback";loadScript(url);return self};gsndfpfactory.prototype.getCookie=function(nameOfCookie){var begin,cd,cookieData,end;if($doc.cookie.length>0){begin=$doc.cookie.indexOf(nameOfCookie+"=");end=0;if(begin!==-1){begin+=nameOfCookie.length+1;end=$doc.cookie.indexOf(";",begin);if(end===-1){end=$doc.cookie.length}cookieData=decodeURI($doc.cookie.substring(begin,end));if(cookieData.indexOf(",")>0){cd=cookieData.split(",");gsndfp.gsnNetworkId=cd[0];gsndfp.enableCircPlus=cd[1];gsndfp.disableSw=cd[2]}return cookieData}}};gsndfpfactory.prototype.setCookie=function(nameOfCookie,value,expireHours){var ed,edv,self,v;self=this;ed=new Date;ed.setTime(ed.getTime()+(expireHours||24)*3600*1e3);v=encodeURI(value);edv=ed.toGMTString();if(gsndfp.isDebug){$doc.cookie=nameOfCookie+"="+v+"; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/"}else{$doc.cookie=nameOfCookie+"="+v+"; expires="+edv+"; path=/"}return self};gsndfpfactory.prototype.setTargeting=function(gtslot,allData){var exclusions,exclusionsGroup,i,k,len,targeting,v,valueTrimmed;targeting=allData["targeting"];if(targeting){if(typeof targeting==="string"){targeting=eval("("+targeting+")")}for(k in targeting){v=targeting[k];if(k==="brand"){gsndfp.setBrand(v)}if(k==="dept"&&typeof v==="string"){v=v.split(",").reverse()}gtslot.setTargeting(k,v)}}exclusions=allData["exclusions"];if(exclusions){exclusionsGroup=exclusions.split(",");valueTrimmed=void 0;for(k=i=0,len=exclusionsGroup.length;i<len;k=++i){v=exclusionsGroup[k];valueTrimmed=_tk.util.trim(v);if(valueTrimmed.length>0){gtslot.setCategoryExclusion(valueTrimmed)}}}return this};gsndfpfactory.prototype.createAds=function(){var $adUnit,$existingContent,adUnit,adUnitID,allData,dimensions,i,k,len,opts,ref,self;self=this;opts=self.dopts;ref=self.$ads;for(k=i=0,len=ref.length;i<len;k=++i){adUnit=ref[k];$adUnit=qsel(adUnit);allData=_tk.util.allData(adUnit);adUnitID=self.getID($adUnit,self.storeAs,adUnit);dimensions=self.getDimensions(allData);if(gsndfp.cleanRefresh){$existingContent=adUnit.innerHTML;qsel(adUnit).html("")}$adUnit.addClass("display-none");$win.googletag.cmd.push(function(){var companion,gtslot,j,len1,map,mapping,ref1,v;gtslot=self.adUnitById[adUnitID];if(gtslot){self.setTargeting(gtslot,allData);return}self.dfpID=self.dfpID.replace(/(\/\/)+/gi,"/").replace(/\s+/gi,"").replace(/(\/)$/,"/");if(self.dfpID.indexOf("/")!==0){self.dfpID="/"+dfpID}if(allData["outofpage"]){gtslot=$win.googletag.defineOutOfPageSlot(self.dfpID,adUnitID).addService($win.googletag.pubads())}else{gtslot=$win.googletag.defineSlot(self.dfpID,dimensions,adUnitID).addService($win.googletag.pubads())}companion=allData["companion"];if(companion!=null){gtslot.addService($win.googletag.companionAds())}self.setTargeting(gtslot,allData);mapping=allData["sizes"];if(mapping&&opts.sizeMapping[mapping]){map=$win.googletag.sizeMapping();ref1=opts.sizeMapping[mapping];for(k=j=0,len1=ref1.length;j<len1;k=++j){v=ref1[k];map.addSize(v.browser,v.ad_sizes)}gtslot.defineSizeMapping(map.build())}self.adUnitById[adUnitID]=gtslot;gtslot.oldRenderEnded=gtslot.oldRenderEnded||gtslot.renderEnded;gtslot.renderEnded=function(){var display;self.rendered++;display=adUnit.style.display;$adUnit.removeClass("display-none");$adUnit.addClass("display-"+display);gtslot.existing=true;if(gtslot.oldRenderEnded!=null){gtslot.oldRenderEnded()}if(typeof opts.afterEachAdLoaded==="function"){opts.afterEachAdLoaded.call(self,$adUnit,gtslot)}if(typeof opts.afterAllAdsLoaded==="function"&&self.count>0&&self.rendered===self.count){opts.afterAllAdsLoaded.call(self,self.$ads)}};return self})}$win.googletag.cmd.push(function(){var brand,exclusionsGroup,j,len1,pubAds,ref1,setLoc,v,valueTrimmed;pubAds=$win.googletag.pubads();if(typeof opts.setTargeting["brand"]==="undefined"){brand=gsndfp.getBrand();if(brand!=null){opts.setTargeting["brand"]=brand}}if(opts.enableSingleRequest){pubAds.enableSingleRequest()}ref1=opts.setTargeting;for(k in ref1){v=ref1[k];if(k==="brand"){gsndfp.setBrand(v)}pubAds.setTargeting(k,v)}setLoc=opts.setLocation;if(typeof setLoc==="object"){if(typeof setLoc.latitude==="number"&&typeof setLoc.longitude==="number"&&typeof setLoc.precision==="number"){pubAds.setLocation(setLoc.latitude,setLoc.longitude,setLoc.precision)}else if(typeof setLoc.latitude==="number"&&typeof setLoc.longitude==="number"){pubAds.setLocation(setLoc.latitude,setLoc.longitude)}}if(opts.setCategoryExclusion.length>0){exclusionsGroup=opts.setCategoryExclusion.split(",");for(k=j=0,len1=exclusionsGroup.length;j<len1;k=++j){v=exclusionsGroup[k];valueTrimmed=_tk.util.trim(v);if(valueTrimmed.length>0){pubAds.setCategoryExclusion(valueTrimmed)}}}if(opts.collapseEmptyDivs||opts.collapseEmptyDivs==="original"){pubAds.collapseEmptyDivs()}if(opts.disablePublisherConsole){pubAds.disablePublisherConsole()}if(opts.disableInitialLoad){pubAds.disableInitialLoad()}if(opts.noFetch){pubAds.noFetch()}if(self.sel===".circplus"){$win.googletag.companionAds().setRefreshUnfilledSlots(true)}$win.googletag.enableServices();return self});return self};gsndfpfactory.prototype.isHeightInView=function(el){var e,isVisible,overhang,percentVisible,rect;isVisible=true;try{percentVisible=.5;rect=el.getBoundingClientRect();overhang=rect.height*(1-percentVisible);isVisible=rect.top>=-overhang&&rect.bottom<=window.innerHeight+overhang}catch(_error){e=_error}return isVisible};gsndfpfactory.prototype.displayAds=function(){var $adUnit,adUnit,gtslot,i,id,k,len,ref,self,toPush;self=this;toPush=[];ref=self.$ads;for(k=i=0,len=ref.length;i<len;k=++i){adUnit=ref[k];$adUnit=qsel(adUnit);id=$adUnit.id();gtslot=self.adUnitById[id];if(gtslot!=null){if(!self.dopts.inViewOnly||self.isHeightInView(adUnit)){if(gtslot.existing){toPush.push(gtslot)}else{$win.googletag.cmd.push(function(){return $win.googletag.display(id)})}}}else{$win.googletag.cmd.push(function(){return $win.googletag.display(id)})}}if(toPush.length>0){$win.googletag.cmd.push(function(){return $win.googletag.pubads().refresh(toPush)})}};gsndfpfactory.prototype.getID=function($adUnit,adUnitName,adUnit){var id,self;self=this;id=$adUnit.id();if((id||"").length<=0){id=adUnitName+"$auto$gen$id$"+self.count++;$adUnit.id(id)}return id};gsndfpfactory.prototype.getDimensions=function(allData){var dimensionGroups,dimensionSet,dimensions,dimensionsData,i,j,k,len,len1,mapping,ref,self,v;self=this;dimensions=[];dimensionsData=allData["dimensions"];if(dimensionsData){dimensionGroups=dimensionsData.split(",");for(k=i=0,len=dimensionGroups.length;i<len;k=++i){v=dimensionGroups[k];dimensionSet=v.split("x");dimensions.push([parseInt(dimensionSet[0],10),parseInt(dimensionSet[1],10)])}}else{mapping=allData["sizes"];if(mapping&&self.dopts.sizeMapping[mapping]){ref=self.dopts.sizeMapping[mapping];for(k=j=0,len1=ref.length;j<len1;k=++j){v=ref[k];dimensions=dimensions.concat(v.ad_sizes)}}}return dimensions};gsndfpfactory.prototype.dfpLoader=function(){var gads,self;self=this;if(self.isLoaded){return}$win.googletag=$win.googletag||{};$win.googletag.cmd=$win.googletag.cmd||[];gads=loadScript("//www.googletagservices.com/tag/js/gpt.js",function(){if(gads.style.display==="none"){self.dfpBlocked()}return self});gads.onerror=function(){self.dfpBlocked();return self};self.isLoaded=true;return self};gsndfpfactory.prototype.dfpBlocked=function(){var commands,self;self=this;self.adBlockerOn=true;commands=$win.googletag.cmd;setTimeout(function(){var _defineSlot,i,k,len,v;_defineSlot=function(name,dimensions,id,oop){$win.googletag.ads.push(id);$win.googletag.ads[id]={renderEnded:function(){},addService:function(){return this}};return $win.googletag.ads[id]};$win.googletag={cmd:{push:function(callback){callback.call(self);return this}},ads:[],pubads:function(){return this},noFetch:function(){return this},disableInitialLoad:function(){return this},disablePublisherConsole:function(){return this},enableSingleRequest:function(){return this},setTargeting:function(){return this},collapseEmptyDivs:function(){return this},enableServices:function(){return this},defineSlot:function(name,dimensions,id){return _defineSlot(name,dimensions,id,false)},defineOutOfPageSlot:function(name,id){return _defineSlot(name,[],id,true)},display:function(id){$win.googletag.ads[id].renderEnded.call(self);return this}};for(k=i=0,len=commands.length;i<len;k=++i){v=commands[k];$win.googletag.cmd.push(v)}return self},50);return self};return gsndfpfactory}();module.exports=gsndfpfactory}).call(this)},{trakless:3,gmodal:66,"load-script":67,dom:5,"./sw.css":68,"./circplus.html":69}],66:[function(require,module,exports){var Emitter,checkEvent,createModal,domify,gmodal,hideModalInternal,modal,modals,showModalInternal,trim,win;Emitter=require("emitter");domify=require("domify");trim=require("trim");win=window;gmodal=win.gmodal;modals=[];checkEvent=function(self,name,evt,el){var myEvt,scls,tg;evt=evt||win.event;tg=evt.target||evt.srcElement;if(tg.nodeType===3){tg=tg.parentNode}if(self.hasCls(tg.parentNode,""+self.closeCls)){tg=tg.parentNode}scls="gmodal-container gmodal-wrap";if(name==="click"){if(self.hasCls(tg,scls)||tg===el){self.emit("click",tg,evt)}}else if(name==="keypress"){if(self.hasCls(tg,scls)||tg===el||tg===self.doc||tg===self.doc.body){if((evt.which||evt.keyCode)===27){self.emit("esc",tg,evt)}}}else if(name==="tap"){if(self.hasCls(tg,scls)||tg===el){self.emit("tap",tg,evt)}}if(self.hasCls(tg,""+self.closeCls)){myEvt={cancel:false};self.emit("close",myEvt,tg,evt);if(!myEvt.cancel){hideModalInternal(self)}}return true};createModal=function(self){var el,myKeypress,oldkp;el=self.doc.getElementById("gmodal");if(!el){self.injectStyle("gmodalcss",self.css);el=self.doc.createElement("div");el.id="gmodal";el.onclick=function(evt){return checkEvent(self,"click",evt,el)};myKeypress=function(evt){return checkEvent(self,"keypress",evt,el)};el.onkeypress=myKeypress;if(typeof self.doc.onkeypress==="function"){oldkp=self.doc.onkeypress;self.doc.onkeypress=function(evt){oldkp(evt);return myKeypress(evt)}}else{self.doc.onkeypress=myKeypress}el.ontap=function(evt){return checkEvent(self,"tap",evt,el)};el.appendChild(domify(self.tpl));self.doc.getElementsByTagName("body")[0].appendChild(el)}return el};showModalInternal=function(self,opts){var body,eCls,i,len,ref,v;self.isVisible=true;if(opts!=null){self.opts=opts;if(self.opts.content!=null){while(self.el.firstChild){self.el.removeChild(self.el.firstChild)}if(typeof self.opts.content==="string"){self.el.appendChild(domify(self.opts.content))}else{self.el.appendChild(self.opts.content)}self.opts.content=null}}self.closeCls=self.opts.closeCls||self.closeCls;if(!self.opts.disableScrollTop){win.scrollTo(0,0)}self.elWrapper.style.display=self.elWrapper.style.visibility="";self.elWrapper.className=trim(self.baseCls+" "+(self.opts.cls||""));body=self.doc.getElementsByTagName("html")[0];eCls=body.className;body.className=trim(eCls+" html-gmodal");setTimeout(function(){self.emit("show-timeout",self);self.el.className=trim((" "+self.el.className+" ").replace(" in ","")+" in")},self.opts.timeout||50);if(self.opts.hideOn){self.opts._autoHideHandler=function(){return hideModalInternal(self)};ref=self.opts.hideOn.split(",");for(i=0,len=ref.length;i<len;i++){v=ref[i];if(v==="esc"||v==="click"||v==="tap"){self.on(v,self.opts._autoHideHandler)}}}self.emit("show",self);return self};hideModalInternal=function(self){self.elWrapper.className=""+self.baseCls;self.el.className="gmodal-wrap gmodal-content";setTimeout(function(){var eCls;eCls=self.doc.getElementsByTagName("html")[0].className;self.doc.getElementsByTagName("html")[0].className=trim(eCls.replace(/html\-gmodal/gi,""));self.isVisible=false;self.emit("hide",self);if(typeof self.opts.hideCallback==="function"){self.opts.hideCallback(self)}if(self.opts._autoHideHandler){self.off("esc",self.opts._autoHideHandler);self.off("click",self.opts._autoHideHandler);self.off("tap",self.opts._autoHideHandler)}if(modals.length!==0){return self.show()}},self.opts.timeout||50);return self};modal=function(){function modal(){}modal.prototype.doc=win.document;modal.prototype.ishim=null;modal.prototype.elWrapper=null;modal.prototype.el=null;modal.prototype.opts={};modal.prototype.baseCls="gmodal";modal.prototype.closeCls="gmodal-close";modal.prototype.tpl='<div class="gmodal-container"><div class="gmodal-wrap gmodal-left"></div><div class="gmodal-wrap gmodal-content" id="gmodalContent"></div><div class="gmodal-wrap gmodal-right"></div></div>';modal.prototype.css=".gmodal{display:none;overflow:hidden;outline:0;-webkit-overflow-scrolling:touch;position:fixed;top:0;left:0;width:100%;height:200%;z-index:9999990}.gmodal .frameshim{position:absolute;display:block;visibility:hidden;width:100%;height:100%;margin:0;top:0;left:0;border:none;z-index:-999}.html-gmodal body .gmodal{display:block}.html-gmodal,.html-modal body{overflow:hidden;margin:0;padding:0;height:100%;width:100%}.gmodal-container{display:table;position:relative;width:100%;height:50%}.gmodal-wrap{display:table-cell;position:relative;vertical-align:middle}.gmodal-left,.gmodal-right{width:50%}";modal.prototype.show=function(opts,hideCb){var ref,self;self=this;if(!((ref=self.doc)!=null?ref.body:void 0)){return false}self.elWrapper=createModal(self);if(!self.el){self.el=self.doc.getElementById("gmodalContent")}if(opts){opts.hideCallback=hideCb;modals.push(opts)}if(!!self.isVisible){return false}if(modals.length>0){opts=modals.shift()}if(!opts){return false}showModalInternal(self,opts);return self};modal.prototype.hide=function(){var self;self=this;if(!self.elWrapper){return self}if(!!self.opts){hideModalInternal(self)}return self};modal.prototype.injectStyle=function(id,css){var el,elx,self;self=this;el=self.doc.getElementById(id);if(!el){el=self.doc.createElement("style");el.id=id;el.type="text/css";if(el.styleSheet){el.styleSheet.cssText=css}else{el.appendChild(self.doc.createTextNode(css))}elx=self.doc.getElementsByTagName("link")[0];elx=elx||(self.doc.head||self.doc.getElementsByTagName("head")[0]).lastChild;elx.parentNode.insertBefore(el,elx)}return self};modal.prototype.hasCls=function(el,cls){var i,k,len,ref,v;ref=cls.split(" ");for(k=i=0,len=ref.length;i<len;k=++i){v=ref[k];if((" "+el.className+" ").indexOf(" "+v+" ")>=0){return true}}return false};modal.prototype.iShimmy=function(){var self;self=this;if(self.elWrapper!=null&&!self.shim){self.ishim=self.doc.createElement("iframe");self.ishim.className="iframeshim";self.ishim.scrolling="no";self.ishim.frameborder=0;self.ishim.height="100";self.ishim.width="100";self.elWrapper.appendChild(self.ishim)}return self};return modal}();if(!gmodal){Emitter(modal.prototype);gmodal=new modal;win.gmodal=gmodal}module.exports=gmodal},{emitter:70,domify:71,trim:25}],70:[function(require,module,exports){module.exports=Emitter;function Emitter(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in Emitter.prototype){obj[key]=Emitter.prototype[key]}return obj}Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){this._callbacks=this._callbacks||{};(this._callbacks["$"+event]=this._callbacks["$"+event]||[]).push(fn);return this};Emitter.prototype.once=function(event,fn){function on(){this.off(event,on);fn.apply(this,arguments)}on.fn=fn;this.on(event,on);return this};Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var callbacks=this._callbacks["$"+event];if(!callbacks)return this;if(1==arguments.length){delete this._callbacks["$"+event];return this}var cb;for(var i=0;i<callbacks.length;i++){cb=callbacks[i];if(cb===fn||cb.fn===fn){callbacks.splice(i,1);break}}return this};Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks["$"+event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;i<len;++i){callbacks[i].apply(this,args)}}return this};Emitter.prototype.listeners=function(event){this._callbacks=this._callbacks||{};return this._callbacks["$"+event]||[]};Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}},{}],71:[function(require,module,exports){module.exports=parse;var innerHTMLBug=false;var bugTestDiv;if(typeof document!=="undefined"){bugTestDiv=document.createElement("div");bugTestDiv.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>';innerHTMLBug=!bugTestDiv.getElementsByTagName("link").length;bugTestDiv=undefined}var map={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:innerHTMLBug?[1,"X<div>","</div>"]:[0,"",""]};map.td=map.th=[3,"<table><tbody><tr>","</tr></tbody></table>"];map.option=map.optgroup=[1,'<select multiple="multiple">',"</select>"];map.thead=map.tbody=map.colgroup=map.caption=map.tfoot=[1,"<table>","</table>"];map.polyline=map.ellipse=map.polygon=map.circle=map.text=map.line=map.path=map.rect=map.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];function parse(html,doc){if("string"!=typeof html)throw new TypeError("String expected");if(!doc)doc=document;var m=/<([\w:]+)/.exec(html);if(!m)return doc.createTextNode(html);html=html.replace(/^\s+|\s+$/g,"");var tag=m[1];if(tag=="body"){var el=doc.createElement("html");el.innerHTML=html;return el.removeChild(el.lastChild)}var wrap=map[tag]||map._default;var depth=wrap[0];var prefix=wrap[1];var suffix=wrap[2];var el=doc.createElement("div");el.innerHTML=prefix+html+suffix;while(depth--)el=el.lastChild;if(el.firstChild==el.lastChild){return el.removeChild(el.firstChild)}var fragment=doc.createDocumentFragment();while(el.firstChild){fragment.appendChild(el.removeChild(el.firstChild))}return fragment}},{}],67:[function(require,module,exports){var onload=require("script-onload");var tick=require("next-tick");var type=require("type");module.exports=function loadScript(options,fn){if(!options)throw new Error("Cant load nothing...");if("string"==type(options))options={src:options};var https=document.location.protocol==="https:"||document.location.protocol==="chrome-extension:";if(options.src&&options.src.indexOf("//")===0){options.src=https?"https:"+options.src:"http:"+options.src}if(https&&options.https)options.src=options.https;else if(!https&&options.http)options.src=options.http;var script=document.createElement("script");script.type="text/javascript";script.async=true;script.src=options.src;if("function"==type(fn)){onload(script,fn)}tick(function(){var firstScript=document.getElementsByTagName("script")[0];firstScript.parentNode.insertBefore(script,firstScript)});return script}},{"script-onload":22,"next-tick":72,type:26}],72:[function(require,module,exports){"use strict";if(typeof setImmediate=="function"){module.exports=function(f){setImmediate(f)}}else if(typeof process!="undefined"&&typeof process.nextTick=="function"){module.exports=process.nextTick}else if(typeof window=="undefined"||window.ActiveXObject||!window.postMessage){module.exports=function(f){setTimeout(f)}}else{var q=[];window.addEventListener("message",function(){var i=0;while(i<q.length){try{q[i++]()}catch(e){q=q.slice(i);window.postMessage("tic!","*");throw e}}q.length=0},true);module.exports=function(fn){if(!q.length)window.postMessage("tic!","*");q.push(fn)}}},{}],68:[function(require,module,exports){module.exports='.gsnsw {\n  	float: left;\n}\n\n.gmodal {\n    background: url("data:image/gif;base64, iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNg2AQAALUAs0e+XlcAAAAASUVORK5CYII=");\n}\n\n.sw-pop {\n    /* default transparency for IE8 */\n	background: rgba(119, 119, 119, 1);\n}\n\n.gmodal-content {\n    vertical-align: top;\n    top: 50px;\n}\n\n@media (max-width: 640px) and (max-height: 640px){\n    .gsnsw {\n        float: none !important;\n    }\n\n    .sw-header-cta, .sw-header-break, .sw-header-right-img {\n        display: none !important;\n    }\n\n    .sw-header-break{\n        display:none !important;\n    }\n\n    .sw-pop {\n        width: 280px !important;\n        left:0 !important;\n        margin-left:0 !important;\n    }\n\n    .sw-header-dismiss {\n        position: static !important;\n        left:0 !important;\n        top:0 !important;\n        vertical-align: middle !important;\n        text-align: center !important;\n    }\n\n    .sw-close{\n        padding: 1px !important;\n    }\n\n    .gmodal-content {\n        vertical-align: middle;\n        height: 80vh;\n        top: auto;\n    }\n\n    .sw-body {\n        max-height: 60vh;\n        overflow-y: scroll;\n    }\n}'},{}],69:[function(require,module,exports){module.exports='<div class="gsn-slot-container"><div class="cpslot cpslot2" data-companion="true" data-dimensions="300x50"></div></div><div class="gsn-slot-container"><div class="cpslot cpslot1" data-dimensions="300x100,300x120"></div></div>'},{}]},{},{1:""});